<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Developer Documents | SUN Network DAppChain</title>
    <meta name="description" content="">
    <link rel="icon" href="/sunnetwork/doc/favicon.png">
    
    <link rel="preload" href="/sunnetwork/doc/assets/css/0.styles.9870b621.css" as="style"><link rel="preload" href="/sunnetwork/doc/assets/js/app.da28acec.js" as="script"><link rel="preload" href="/sunnetwork/doc/assets/js/2.5e8057ea.js" as="script"><link rel="preload" href="/sunnetwork/doc/assets/js/5.6ad6379a.js" as="script"><link rel="preload" href="/sunnetwork/doc/assets/js/3.8582971b.js" as="script"><link rel="prefetch" href="/sunnetwork/doc/assets/js/10.7be2c951.js"><link rel="prefetch" href="/sunnetwork/doc/assets/js/11.425ac46f.js"><link rel="prefetch" href="/sunnetwork/doc/assets/js/12.e45a89cb.js"><link rel="prefetch" href="/sunnetwork/doc/assets/js/4.20e2a960.js"><link rel="prefetch" href="/sunnetwork/doc/assets/js/6.afcacef8.js"><link rel="prefetch" href="/sunnetwork/doc/assets/js/7.6112bcb2.js"><link rel="prefetch" href="/sunnetwork/doc/assets/js/8.985599b0.js"><link rel="prefetch" href="/sunnetwork/doc/assets/js/9.57a1c323.js">
    <link rel="stylesheet" href="/sunnetwork/doc/assets/css/0.styles.9870b621.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/sunnetwork/doc/" class="home-link router-link-active"><!----> <span class="site-name">SUN Network DAppChain</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/sunnetwork/doc/guide/" class="nav-link router-link-exact-active router-link-active">Guide</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/sunnetwork/doc/guide/" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/sunnetwork/doc/zh/guide/" class="nav-link">简体中文</a></li></ul></div></div> <a href="https://github.com/tronprotocol/sun-network" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/sunnetwork/doc/guide/" class="nav-link router-link-exact-active router-link-active">Guide</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/sunnetwork/doc/guide/" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/sunnetwork/doc/zh/guide/" class="nav-link">简体中文</a></li></ul></div></div> <a href="https://github.com/tronprotocol/sun-network" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/sunnetwork/doc/guide/" class="active sidebar-link">Developer Documents</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/sunnetwork/doc/guide/#i-overview" class="sidebar-link">I. Overview</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/sunnetwork/doc/guide/#_1-sun-network-project" class="sidebar-link">1. SUN Network Project</a></li><li class="sidebar-sub-header"><a href="/sunnetwork/doc/guide/#_2-dappchain-features" class="sidebar-link">2. DAppChain Features</a></li></ul></li><li class="sidebar-sub-header"><a href="/sunnetwork/doc/guide/#ii-dappchain" class="sidebar-link">II. DAppChain</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/sunnetwork/doc/guide/#_1-dappchain-architecture-and-components-functions" class="sidebar-link">1. DAppChain architecture and components functions</a></li><li class="sidebar-sub-header"><a href="/sunnetwork/doc/guide/#_2-side-chain" class="sidebar-link">2. Side-chain</a></li><li class="sidebar-sub-header"><a href="/sunnetwork/doc/guide/#_3-contract" class="sidebar-link">3. Contract</a></li><li class="sidebar-sub-header"><a href="/sunnetwork/doc/guide/#_4-cross-chain-details" class="sidebar-link">4. Cross-chain details</a></li><li class="sidebar-sub-header"><a href="/sunnetwork/doc/guide/#_5-incentive" class="sidebar-link">5. Incentive</a></li></ul></li><li class="sidebar-sub-header"><a href="/sunnetwork/doc/guide/#iii-how-to-connect-to-dappchain" class="sidebar-link">III. how to connect to DAppChain</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/sunnetwork/doc/guide/#_1-dappchain-node-list" class="sidebar-link">1. DAppChain node list</a></li><li class="sidebar-sub-header"><a href="/sunnetwork/doc/guide/#_2-dappchain-testnet-node-list" class="sidebar-link">2. DAppChain testnet node list</a></li><li class="sidebar-sub-header"><a href="/sunnetwork/doc/guide/#_3-apply-for-test-coins" class="sidebar-link">3. Apply for test coins</a></li><li class="sidebar-sub-header"><a href="/sunnetwork/doc/guide/#_4-connection-tools" class="sidebar-link">4. Connection tools</a></li></ul></li><li class="sidebar-sub-header"><a href="/sunnetwork/doc/guide/#iv-sdk-quick-starts" class="sidebar-link">IV. SDK quick starts</a></li><li class="sidebar-sub-header"><a href="/sunnetwork/doc/guide/#v-java-sdk" class="sidebar-link">V. JAVA SDK</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/sunnetwork/doc/guide/#sdk-initiation" class="sidebar-link">SDK initiation</a></li><li class="sidebar-sub-header"><a href="/sunnetwork/doc/guide/#cross-chain-interface" class="sidebar-link">Cross-chain interface</a></li><li class="sidebar-sub-header"><a href="/sunnetwork/doc/guide/#side-chain-interfaces" class="sidebar-link">Side-chain interfaces</a></li><li class="sidebar-sub-header"><a href="/sunnetwork/doc/guide/#main-chain-interfaces" class="sidebar-link">Main-chain interfaces</a></li><li class="sidebar-sub-header"><a href="/sunnetwork/doc/guide/#common-interfaces-of-main-chain-and-sidechain" class="sidebar-link">Common interfaces of main-chain and sidechain</a></li></ul></li><li class="sidebar-sub-header"><a href="/sunnetwork/doc/guide/#vi-sunweb" class="sidebar-link">VI. SunWeb</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/sunnetwork/doc/guide/#sunweb-class" class="sidebar-link">SunWeb class</a></li><li class="sidebar-sub-header"><a href="/sunnetwork/doc/guide/#asset-deposit" class="sidebar-link">Asset deposit</a></li><li class="sidebar-sub-header"><a href="/sunnetwork/doc/guide/#asset-approve" class="sidebar-link">Asset approve</a></li><li class="sidebar-sub-header"><a href="/sunnetwork/doc/guide/#asset-mapping" class="sidebar-link">Asset mapping</a></li><li class="sidebar-sub-header"><a href="/sunnetwork/doc/guide/#asset-withdraw" class="sidebar-link">Asset withdraw</a></li><li class="sidebar-sub-header"><a href="/sunnetwork/doc/guide/#inject-fund" class="sidebar-link">Inject fund</a></li><li class="sidebar-sub-header"><a href="/sunnetwork/doc/guide/#retry-2" class="sidebar-link">Retry</a></li><li class="sidebar-sub-header"><a href="/sunnetwork/doc/guide/#signature" class="sidebar-link">Signature</a></li></ul></li><li class="sidebar-sub-header"><a href="/sunnetwork/doc/guide/#vii-register-as-a-super-representative-witness" class="sidebar-link">VII. Register as a Super Representative (Witness).</a></li><li class="sidebar-sub-header"><a href="/sunnetwork/doc/guide/#viii-deploy-your-own-side-chain" class="sidebar-link">VIII. Deploy your own side-chain</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/sunnetwork/doc/guide/#get-started" class="sidebar-link">Get started</a></li><li class="sidebar-sub-header"><a href="/sunnetwork/doc/guide/#test-whether-is-successful" class="sidebar-link">Test whether is successful</a></li></ul></li><li class="sidebar-sub-header"><a href="/sunnetwork/doc/guide/#ix-roadmap" class="sidebar-link">IX. RoadMap</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="developer-documents"><a href="#developer-documents" class="header-anchor">#</a> Developer Documents</h1> <h2 id="i-overview"><a href="#i-overview" class="header-anchor">#</a> I. Overview</h2> <h3 id="_1-sun-network-project"><a href="#_1-sun-network-project" class="header-anchor">#</a> 1. SUN Network Project</h3> <p>SUN Network Plan is an expansion plan for TRON main network ecosystem, including smart contract application oriented side-chain(DAppChain), cross-chain communication and other expansion projects. DAppChain is a side-chain project of TRON, which focuses on providing unlimited capacity expansion for the whole network. DAppChain is also designed to provide a low cost system for user and help DApp to operate safely and efficiently on TRON.</p> <h3 id="_2-dappchain-features"><a href="#_2-dappchain-features" class="header-anchor">#</a> 2. DAppChain Features</h3> <p>DAppChain is the first product of SUN Network Project. The chain is compatible with TRON main-chain, and fully support smart contract with low consumption, high security and high efficiency.</p> <h4 id="_2-1-compatible-with-tron-main-chain"><a href="#_2-1-compatible-with-tron-main-chain" class="header-anchor">#</a> 2.1 Compatible with TRON main-chain</h4> <p>The side-chain uses the same DPoS consensus mechanism as the main-net and support almost all functions on it. TRON main-net users can easily switch to the side-chain, developers can also quickly transplant or develop new DApps on the side-chain.</p> <h4 id="_2-2-highly-customizable-side-chain"><a href="#_2-2-highly-customizable-side-chain" class="header-anchor">#</a> 2.2 Highly customizable side-chain</h4> <p>DAppChain is committed to providing a highly flexible, well-configured, highly customizable multi-side-chain system for all eco-participants. Highly customizable is also one key feature different from the main-chain.</p> <h4 id="_2-3-increase-higher-tps-for-the-ecosystem"><a href="#_2-3-increase-higher-tps-for-the-ecosystem" class="header-anchor">#</a> 2.3 Increase higher TPS for the ecosystem</h4> <p>TRON main network supports multiple side-chain connections, which means TRON ecosystem can increases its TPS infinitely. According to the TPS peak 2000 on the main network, the whole TRON ecosystem TPS can reach 2000 * SideChainNum with the increasing of side-chains numbers.</p> <h4 id="_2-4-low-consumption"><a href="#_2-4-low-consumption" class="header-anchor">#</a> 2.4 low consumption</h4> <p>Under the same circumstances, the resource cost on the side-chain is only half or even much more less than the main network. This can help DApp developers reduce development and operation costs. Low consumption is also aiming at attracting small developer teams to participate in the ecosystem construction.</p> <h4 id="_2-5-safe-assets-migration"><a href="#_2-5-safe-assets-migration" class="header-anchor">#</a> 2.5 Safe assets migration</h4> <p>The first phase of DAppChain use DPoS mechanism for consensus. Gateway contract and Oracle relay nodes ensure the transaction efficiency and asset security on-chain and cross-chain.</p> <h4 id="_2-6-complete-api-and-developer-toolset"><a href="#_2-6-complete-api-and-developer-toolset" class="header-anchor">#</a> 2.6 Complete API and developer toolset</h4> <p>We provide a TRON network compatible toolset, which have all the functionality of a developer need to build his own DApp on DAppChain. And we also provide new cross-chain APIs to help reduce developer learning costs when deal with cross chain operations. The SDK have both Java and JS version for developers to choose.</p> <h2 id="ii-dappchain"><a href="#ii-dappchain" class="header-anchor">#</a> II. DAppChain</h2> <h3 id="_1-dappchain-architecture-and-components-functions"><a href="#_1-dappchain-architecture-and-components-functions" class="header-anchor">#</a> 1. DAppChain architecture and components functions</h3> <p>This section will explain the architecture of DAppChain.</p> <p><img src="/sunnetwork/doc/assets/img/dappchain.fc034759.png" alt="dappchain.png"></p> <p>As above picture shows, DAppChain contains 4 main parts:</p> <ul><li>MainChain Gateway contract, provide asset mapping, asset deposit to side-chain and asset withdraw from side-chain functionalities on main-chain.</li> <li>Multiple oracle relay nodes, provide cross-chain transaction validation, mapping/deposit/withdraw transaction broadcast functions.</li> <li>SideChain Gateway contract, provide asset management on side-chain.</li> <li>SideChain, function based on main-chain, but customized a few mechanism to fit side-chain model</li></ul> <h3 id="_2-side-chain"><a href="#_2-side-chain" class="header-anchor">#</a> 2. Side-chain</h3> <h4 id="_2-1-overview"><a href="#_2-1-overview" class="header-anchor">#</a> 2.1 Overview</h4> <p>Side-chain is the key part of DAppChain project. The chain produces a block every 3 seconds using DPoS mechanism. The chain itself guarantee side-chain transaction consensus and confirm cross chain transaction along with multiple oracle relay nodes.</p> <h4 id="_2-2-consensus"><a href="#_2-2-consensus" class="header-anchor">#</a> 2.2 Consensus</h4> <p>Same as main-chain, side-chain uses the DPoS consensus for block producer election. Multiple witnesses govern side-chain ecosystem together. Witnesses play roles as side-chain transaction validators. As long as 2/3 of the witnesses confirm transactions in a block, the transactions are accepted by the system.</p> <h4 id="_2-3-available-proposals"><a href="#_2-3-available-proposals" class="header-anchor">#</a> 2.3 Available Proposals</h4> <h4 id="_2-4-side-chain-special-features"><a href="#_2-4-side-chain-special-features" class="header-anchor">#</a> 2.4 Side-chain special features:</h4> <p>Fund: current reward pool for witness. A reward pool for community government. Part of the profit of side-chain will be inject into the pool. This will achieve a balance between witness reward and chain owner reward.</p> <p>FundInject: A side-chain system contract interface for reward pool fund injection. It opens for anyone who want to donate TRX to side-chain ecosystem. However, only founder address can get chain reward, the reset will be regard as witness reward.</p> <p>Mine function: a new precompile solidity function to mine TRX which deposited from main-chain. It is very similar to a coin base function.</p> <p>MineToken function: a new precompile solidity function to mine TRC10 token which deposited from man chain. Same as mine function above.</p> <h3 id="_3-contract"><a href="#_3-contract" class="header-anchor">#</a> 3. Contract</h3> <h4 id="_3-1-contract-type"><a href="#_3-1-contract-type" class="header-anchor">#</a> 3.1 Contract Type</h4> <p>Contract is consist of 3 parts:
MainChain gateway contract,
SideChain gateway contract,
Standard TRC20/TRC721 contract</p> <h4 id="_3-2-mainchain-gateway-contract-and-sidechain-gateway-contract"><a href="#_3-2-mainchain-gateway-contract-and-sidechain-gateway-contract" class="header-anchor">#</a> 3.2 MainChain gateway contract and SideChain gateway contract.</h4> <h5 id="_3-2-1-trc20-trc721-contract-mapping"><a href="#_3-2-1-trc20-trc721-contract-mapping" class="header-anchor">#</a> 3.2.1 TRC20/TRC721 contract mapping:</h5> <div class="language-Solidity extra-class"><pre class="language-text"><code>//use mappingTRC20 as an example
//Main-chain gateway contract method
function mappingTRC20(bytes txId) public onlyNotStop onlyNotPause goDelegateCall payable returns (uint256) {
require(msg.value &gt;= mappingFee, &quot;trc20MappingFee not enough&quot;);
if (msg.value &gt; 0) {
bonus += msg.value;
}
address trc20Address = calcContractAddress(txId, msg.sender);
require(trc20Address != sunTokenAddress, &quot;mainChainAddress == sunTokenAddress&quot;);
require(mainToSideContractMap[trc20Address] != 1, &quot;trc20Address mapped&quot;);
uint256 size;
assembly {size := extcodesize(trc20Address)}
require(size &gt; 0);
userMappingList.push(MappingMsg(trc20Address, DataModel.TokenKind.TRC20, DataModel.Status.SUCCESS));
mainToSideContractMap[trc20Address] = 1;
emit TRC20Mapping(trc20Address, userMappingList.length - 1);
return userMappingList.length - 1;
}
//Side-chain gateway method
function deployDAppTRC20AndMapping(address mainChainAddress, string name, string symbol, uint8 decimals) internal returns (address r) {
address sideChainAddress = new DAppTRC20(address(this), name, symbol, decimals);
mainToSideContractMap[mainChainAddress] = sideChainAddress;
sideToMainContractMap[sideChainAddress] = mainChainAddress;
emit DeployDAppTRC20AndMapping(mainChainAddress, sideChainAddress);
r = sideChainAddress;
}

</code></pre></div><p>TRC20/TRC721 contract owner has to put their contract deployment transaction id to MainChain gateway contract on main-chain. Gateway contract would verify the existence of the transaction. Multiple oracle will verify and confirm the mapping operations and generate a corresponding TRC20/TRC721 contract on side-chain.</p> <h5 id="_3-2-2-asset-deposit-operation"><a href="#_3-2-2-asset-deposit-operation" class="header-anchor">#</a> 3.2.2 Asset deposit operation</h5> <div class="language-Solidity extra-class"><pre class="language-text"><code>//use depositTRX as an example
//MainChain gateway contract method
function depositTRX() payable public onlyNotStop onlyNotPause goDelegateCall returns (uint256) {
  require(msg.value &gt; 0, &quot;value must be &gt; 0&quot;);
  require(msg.value &gt;= depositMinTrx, &quot;value must be &gt;= depositMinTrx&quot;);
  require(msg.value &lt;= uint64Max, &quot;msg.value must &lt;= uint64Max&quot;);
  userDepositList.push(DepositMsg(msg.sender, uint64(msg.value), 0, address(0), 0, 0, 0));
  emit TRXReceived(msg.sender, uint64(msg.value), userDepositList.length - 1);
  return userDepositList.length - 1;
}
//SideChain gateway contract method
function depositTRX(address to, uint256 value) internal {
  mintTRXContract.call(value);
  to.transfer(value);
  emit DepositTRX(to, value);
}
</code></pre></div><p>When a user deposit TRX/TRC10/TRC20/TRC721 assets, the assets will be locked in main-chain gateway. On side-chain , multiple oracle will confirm deposit operation, and side-chain gateway will mint new asset to user side-chain account.</p> <h5 id="_3-2-3-asset-withdraw-operation"><a href="#_3-2-3-asset-withdraw-operation" class="header-anchor">#</a> 3.2.3 Asset withdraw operation</h5> <div class="language-Solidity extra-class"><pre class="language-text"><code>//use withdrawTRX as an example
//side-chain gateway contract method
function withdrawTRX() payable public onlyNotPause onlyNotStop goDelegateCall returns (uint256 r) {
        require(msg.value &gt;= withdrawMinTrx + withdrawFee, &quot;value must be &gt;= withdrawMinTrx+withdrawFee&quot;);
        if (msg.value &gt; 0) {
            bonus += withdrawFee;
        }
        uint256 withdrawValue = msg.value - withdrawFee;
        require(withdrawValue &gt; 0, &quot;withdrawValue must be &gt; 0&quot;);
        userWithdrawList.push(WithdrawMsg(msg.sender, address(0), 0, withdrawValue, DataModel.TokenKind.TRX, DataModel.Status.SUCCESS));
        // burn
        address(0).transfer(withdrawValue);
        emit WithdrawTRX(msg.sender, withdrawValue, userWithdrawList.length - 1);
        r = userWithdrawList.length - 1;
    }
//MainChain gateway contract method
function withdrawTRX(address to, uint256 value, uint256 nonce, bytes[] oracleSigns)
    public onlyNotStop onlyOracle goDelegateCall {
        require(oracleSigns.length &lt;= numOracles, &quot;withdraw TRX signs num &gt; oracles num&quot;);
        bytes32 dataHash = keccak256(abi.encodePacked(to, value, nonce));
        bool needWithdraw = checkOracles(dataHash, nonce, oracleSigns);
        if (needWithdraw) {
            to.transfer(value);
            // ensure it's not reentrant
            emit TRXWithdraw(to, value, nonce);
        }
    }
</code></pre></div><p>Different from deposit and mapping, withdraw operation is triggered on side-chain. Similar to deposit operation, user can use gateway contract to trigger withdraw operation for their TRX/TRC10/TRC20/TRC721 assets. Asset on side-chain will be destroyed when it leaving side-chain.</p> <h4 id="_3-3-side-chain-standard"><a href="#_3-3-side-chain-standard" class="header-anchor">#</a> 3.3 Side-chain standard</h4> <p>TRC20/TRC721 only Implement TRON basic interfaces. And add two mint functions in the contract. Also add two standard withdraw function for TRC20/TRC721 WI.</p> <div class="language-Solidity extra-class"><pre class="language-text"><code>//Functions in standard TRC20 contract
function mint(address to, uint256 value) external onlyGateway {
        require(to != address(0));
        _totalSupply = _totalSupply.add(value);
​        _balances[to] = _balances[to].add(value);
​        emit Transfer(address(0), to, value);
​    }
    function withdrawal(uint256 value) payable external returns (uint256 r) {
​        transfer(gateway, value);
​        r = ITRC20Receiver(gateway).onTRC20Received.value(msg.value)(msg.sender, value);
​    }
//Functions in standard TRC721 contract
function mint(address to, uint256 tokenId) external onlyGateway {
​        require(to != address(0));
​        require(!_exists(tokenId));
        _tokenOwner[tokenId] = to;
​        _ownedTokensCount[to] = _ownedTokensCount[to].add(1);
        emit Transfer(address(0), to, tokenId);
​    }
    function withdrawal(uint256 tokenId) payable external returns (uint256 r) {
​        transfer(gateway, tokenId);
​        r = ITRC721Receiver(gateway).onTRC721Received.value(msg.value)(msg.sender, tokenId);
​    }
</code></pre></div><h3 id="_4-cross-chain-details"><a href="#_4-cross-chain-details" class="header-anchor">#</a> 4. Cross-chain details</h3> <h4 id="_4-1-overview"><a href="#_4-1-overview" class="header-anchor">#</a> 4.1 Overview</h4> <p>DAppChain contains 3 main components for cross-chain interaction: MainChain gateway contract, Oracle service, and Side-chain gateway contract.</p> <p>Oracle listens to the messages from the main-chain gateway contract and the side-chain gateway contract, and realizes the interactive communication between the main-chains and side-chains. When more than 2/3 of the oracle nodes confirmed an cross-chain transaction, the transaction can be considered to be valid.</p> <p>Cross-chain interaction can be classified as 3 main type: TRC20/TRC721 contract mapping, asset deposit, and asset withdraw.</p> <p><img src="/sunnetwork/doc/assets/img/crosschain.8630b4fb.png" alt="crosschain"></p> <h4 id="_4-2-trc20-trc721-contract-mapping"><a href="#_4-2-trc20-trc721-contract-mapping" class="header-anchor">#</a> 4.2 TRC20/TRC721 contract mapping</h4> <p>Asset owner need to trigger TRC20/TRC721 mapping function to approve access for the asset to migrate to side-chain. The asset can be mapping to side-chain automatically, and no one need to deploy by themselves.</p> <p><img src="/sunnetwork/doc/assets/img/mapping.eed3c9e4.png" alt="mapping.png"></p> <p>Steps:</p> <ol><li>Deployer should own(deployed) an TRC20/TRC721 contract on main-chain.</li> <li>Asset Deployer should trigger mapping function in gateway contract for owned TRC20/TRC721 contract. Gateway contract will verified the ownership. If verified, an deploy event will be event.</li> <li>Oracle catches the deploy event.</li> <li>Oracle trigger side-chain gateway contract to create TRON standard side-chain TRC20/TRC721 contract, and do a cross-chain mapping.</li></ol> <h4 id="_4-3-deposit"><a href="#_4-3-deposit" class="header-anchor">#</a> 4.3 Deposit</h4> <p>User uses deposit function in gateway contract for asset migration to side-chain purpose.</p> <p><img src="/sunnetwork/doc/assets/img/deposit.ab5a5c9c.png" alt="deposit.png"></p> <p>Steps:</p> <ol><li>When migrate TRC20/TRC721 token, user need to trigger an approve function in TRC20/TRC721 contract on main-chain.</li> <li>User triggers deposit function in MainChain gateway contract.</li> <li>Oracle catches deposit event.</li> <li>Oracle call function in SideChain gateway for asset migration.</li> <li>For TRC20/TRC7212 token, side-chain will mint specific amount of token in the mapped contract, while TRX/TRC10 token will be added directly on user account.</li></ol> <h4 id="_4-4-withdraw"><a href="#_4-4-withdraw" class="header-anchor">#</a> 4.4 Withdraw</h4> <p>User uses withdraw function in gateway contract for asset migration to main-chain purpose.</p> <p><img src="/sunnetwork/doc/assets/img/withdraw.cbb40dea.png" alt="withdraw.png"></p> <p>Steps:</p> <ol><li>When migrate TRC20/TRC721 token, user need to trigger an approve function in TRC20/TRC721 contract on side-chain. Gateway contract would call TRC20/TRC721 contract directly due to our customization.</li> <li>Oracle catches the withdraw event.</li> <li>User calls the withdraw function on main-chain.</li> <li>MainChain gateway contract calls TRC20/TRC721 contract for withdraw operation, while TRX/TRC10 would be able to send directly to user account.</li></ol> <h3 id="_5-incentive"><a href="#_5-incentive" class="header-anchor">#</a> 5. Incentive</h3> <ol><li><p>Block production reward will keep the same in the same maintenance interval.</p></li> <li><p>Reward changes in different maintenance interval:
payPerBlock = fund / ((86400 / 3 ) * dayToSustainByFund)
payPerBlock: block production reward for each block
Fund: current reward pool TRX amount
dayToSustainByFund: Fund distribution period</p></li> <li><p>Witness reward would be divided into two parts according to percentToPayWitness value. Part is for witness, the rest will be send to founder:
payForWitnessPerBlock = payPerBlock * percentToPayWitness / 100
payForFounderPerBlock = payPerBlock - payForWitnessPerBlock
payForWitnessPerBlock: reward for witness along single block produce interval
payForFounderPerBlock: reward for founder along single block produce interval</p></li></ol> <h2 id="iii-how-to-connect-to-dappchain"><a href="#iii-how-to-connect-to-dappchain" class="header-anchor">#</a> III. how to connect to DAppChain</h2> <h3 id="_1-dappchain-node-list"><a href="#_1-dappchain-node-list" class="header-anchor">#</a> 1. DAppChain node list</h3> <h4 id="full-nodes"><a href="#full-nodes" class="header-anchor">#</a> Full Nodes</h4> <p>Http Interface</p> <ul><li>sun.tronex.io/wallet  (CORS enabled)</li> <li>47.90.245.159:8090</li> <li>47.90.211.50:8090</li> <li>47.252.6.19:8090</li> <li>47.89.185.14:8090</li></ul> <p>RPC Interface</p> <ul><li>47.90.245.159:50051</li> <li>47.90.211.50:50051</li> <li>47.252.6.19:50051</li> <li>47.89.185.14:50051</li></ul> <h4 id="solidity-nodes"><a href="#solidity-nodes" class="header-anchor">#</a> Solidity Nodes</h4> <p>Http Interface</p> <ul><li>sun.tronex.io/walletsolidity  (CORS enabled)</li> <li>47.90.245.159:8091</li> <li>47.90.211.50:8091</li> <li>47.252.6.19:8091</li> <li>47.89.185.14:8091</li></ul> <p>RPC Interface</p> <ul><li>47.90.245.159:50061</li> <li>47.90.211.50:50061</li> <li>47.252.6.19:50061</li> <li>47.89.185.14:50061</li></ul> <h4 id="event-server"><a href="#event-server" class="header-anchor">#</a> Event Server</h4> <p>side chain</p> <ul><li>sun.tronex.io/event</li></ul> <h4 id="dappchain-gateway-contract-information"><a href="#dappchain-gateway-contract-information" class="header-anchor">#</a> DAppChain gateway contract information</h4> <p>SideChainID</p> <ul><li>41E209E4DE650F0150788E8EC5CAFA240A23EB8EB7</li></ul> <p>TRON Network MainChain gateway contract address</p> <ul><li>TWaPZru6PR5VjgT4sJrrZ481Zgp3iJ8Rfo</li></ul> <p>SUN Network DAppChain(SideChain) gateway contract address</p> <ul><li>TGKotco6YoULzbYisTBuP6DWXDjEgJSpYz</li></ul> <h3 id="_2-dappchain-testnet-node-list"><a href="#_2-dappchain-testnet-node-list" class="header-anchor">#</a> 2. DAppChain testnet node list</h3> <h4 id="full-nodes-2"><a href="#full-nodes-2" class="header-anchor">#</a> Full Nodes</h4> <p>Http Interface</p> <ul><li>47.252.85.90:8090</li> <li>47.252.85.90:8070(CORS Enabled)</li> <li>47.252.80.185:8090</li> <li>47.252.84.141:8090</li></ul> <p>RPC Interface</p> <ul><li>47.252.85.90:50051</li> <li>47.252.80.185:50051</li> <li>47.252.84.141:50051</li></ul> <h4 id="solidity-nodes-2"><a href="#solidity-nodes-2" class="header-anchor">#</a> Solidity Nodes</h4> <p>Http Interface</p> <ul><li>47.252.85.90:8091</li> <li>47.252.85.90:8071(CORS Enabled)</li> <li>47.252.80.185:8091</li> <li>47.252.84.141:8091</li></ul> <p>RPC Interface</p> <ul><li>47.252.85.90:50060</li> <li>47.252.80.185:50060</li> <li>47.252.84.141:50060</li></ul> <h4 id="event-server-2"><a href="#event-server-2" class="header-anchor">#</a> Event Server</h4> <p>main chain</p> <ul><li>47.252.81.14:8070(CORS Enabled)</li></ul> <p>side chain</p> <ul><li>47.252.87.129:8070(CORS Enabled)</li></ul> <h4 id="testnet-gateway-contract-information"><a href="#testnet-gateway-contract-information" class="header-anchor">#</a> testnet gateway contract information</h4> <p>sidechainid</p> <ul><li>413AF23F37DA0D48234FDD43D89931E98E1144481B</li></ul> <p>main chain gateway contract address</p> <ul><li>TFLtPoEtVJBMcj6kZPrQrwEdM3W3shxsBU</li></ul> <p>side chain gateway contract address</p> <ul><li>TRDepx5KoQ8oNbFVZ5sogwUxtdYmATDRgX</li></ul> <h3 id="_3-apply-for-test-coins"><a href="#_3-apply-for-test-coins" class="header-anchor">#</a> 3. Apply for test coins</h3> <div class="token" data-v-457776e2><a href="http://testnet.tronex.io/join/getJoinPage" class="nav-link action-button" data-v-457776e2>Apply for test coins</a></div> <h3 id="_4-connection-tools"><a href="#_4-connection-tools" class="header-anchor">#</a> 4. Connection tools</h3> <p>Via sun-scan (cooming soon)
Via sun-cli (see developer document)
Via SDK (see developer document)</p> <h2 id="iv-sdk-quick-starts"><a href="#iv-sdk-quick-starts" class="header-anchor">#</a> IV. SDK quick starts</h2> <p>If you want to learn how to develop TRON smart contracts and DApps on the side-chain, please refer to the JAVA SDK and JS SDK documentation below.
If you are new to TRON Smart Contract development, please move to our github demo pages and refer to our code for next step.</p> <h2 id="v-java-sdk"><a href="#v-java-sdk" class="header-anchor">#</a> V. JAVA SDK</h2> <p>DAppChain provide a java version of SDK for developer to build their DApp. It contains a complete tool set for on-chain, cross-chain functions.</p> <h3 id="sdk-initiation"><a href="#sdk-initiation" class="header-anchor">#</a> SDK initiation</h3> <p>An SDK object need to be initiated when start to use the SDK. IServerConfig interface need to be implemented for parameter configuration. And if your DApp need multisign functionality, you need to implement IMultiTransactionSign interface as well.</p> <div class="language- extra-class"><pre class="language-text"><code>Sdk = new SunNetwork();
SunNetworkResponse&lt;Integer&gt; ret = sdk.init(new ServerConfigImpl(), new MultiSignTransactionImpl());
</code></pre></div><p>There are three services in this SDK.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//Main-chain interface</span>
sdk<span class="token punctuation">.</span><span class="token function">getMainChainService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//Side-chain interface</span>
sdk<span class="token punctuation">.</span><span class="token function">getSideChainService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//Cross-chain interaction interface</span>
sdk<span class="token punctuation">.</span><span class="token function">getCrossChainService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="cross-chain-interface"><a href="#cross-chain-interface" class="header-anchor">#</a> Cross-chain interface</h3> <h4 id="mapping"><a href="#mapping" class="header-anchor">#</a> Mapping</h4> <ol><li>TRC20 mapping</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// Called by the deployer of the TRC20 contract on the main-chain to complete the mapping of the TRC20 contract from the main-chain to the side-chain, the standard 20 contract deployed in the side-chain corresponds to the main-chain TRC20 contract.</span>
<span class="token class-name">SunNetworkResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TransactionResponse</span><span class="token punctuation">&gt;</span></span> resp <span class="token operator">=</span> sdk<span class="token punctuation">.</span><span class="token function">getCrossChainService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mappingTrc20</span><span class="token punctuation">(</span>trxHash<span class="token punctuation">,</span> mappingFee<span class="token punctuation">,</span> feeLimit<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//Return value: Use sdk.getSideChainService().getTransactionInfoById(txid) to query resp.getData().getTrxId() to get the nonce value of this mapping operation.</span>
</code></pre></div><table><thead><tr><th>Parameter</th> <th>Description</th></tr></thead> <tbody><tr><td>trxHash</td> <td>deployContract transaction for deploying TRC20 contracts on the main-chain id</td></tr> <tr><td>mappingFee</td> <td>Mapping Fee</td></tr> <tr><td>feeLimit</td> <td>Maximum energy consumption when triggering a contract</td></tr></tbody></table> <ol start="2"><li>TRC721 mapping</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// Called by the deployer of the TRC721 contract on the main-chain to complete the mapping of the TRC721 contract from the main-chain to the side-chain, the standard TRC721 contract will be deployed in the side-chain corresponding to the main-chain TRC721 contract.</span>
<span class="token class-name">SunNetworkResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TransactionResponse</span><span class="token punctuation">&gt;</span></span> resp <span class="token operator">=</span> sdk<span class="token punctuation">.</span><span class="token function">getCrossChainService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mappingTrc721</span><span class="token punctuation">(</span>trxHash<span class="token punctuation">,</span> mappingFee<span class="token punctuation">,</span> feeLimit<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//Return value: Use sdk.getSideChainService().getTransactionInfoById(txid) to query resp.getData().getTrxId() to get the nonce value of this mapping operation.</span>
</code></pre></div><table><thead><tr><th>Parameter</th> <th>Description</th></tr></thead> <tbody><tr><td>trxHash</td> <td>deployContract transaction id for TRC721 contract on the main-chain</td></tr> <tr><td>mappingFee</td> <td>Mapping Fee</td></tr> <tr><td>feeLimit</td> <td>Maximum energy consumption when triggering a contract</td></tr></tbody></table> <h4 id="deposit"><a href="#deposit" class="header-anchor">#</a> Deposit</h4> <ol><li>TRX deposit</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//Pledge a certain number of TRX from the main-chain to the side-chain</span>
<span class="token class-name">SunNetworkResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TransactionResponse</span><span class="token punctuation">&gt;</span></span> resp <span class="token operator">=</span> sdk<span class="token punctuation">.</span><span class="token function">getCrossChainService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">depositTrx</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span> depositFee<span class="token punctuation">,</span> feeLimit<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//Return value: Use sdk.getSideChainService().getTransactionInfoById(txid) to query resp.getData().getTrxId() to get the nonce value of this deposit operation.</span>
</code></pre></div><table><thead><tr><th>Parameter</th> <th>Description</th></tr></thead> <tbody><tr><td>num</td> <td>TRX Quantity (Unit SUN)</td></tr> <tr><td>depositFee</td> <td>Deposit fee</td></tr> <tr><td>feeLimit</td> <td>Maximum energy consumption when triggering a contract</td></tr></tbody></table> <ol start="2"><li>TRC10 token deposit</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//Pledge a certain number of designated TRC10 from the main-chain to the side-chain</span>
<span class="token class-name">SunNetworkResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TransactionResponse</span><span class="token punctuation">&gt;</span></span> resp <span class="token operator">=</span> sdk<span class="token punctuation">.</span><span class="token function">getCrossChainService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">depositTrc10</span><span class="token punctuation">(</span>tokenId<span class="token punctuation">,</span> tokenValue<span class="token punctuation">,</span> depositFee<span class="token punctuation">,</span> feeLimit<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//Return value: Use sdk.getSideChainService().getTransactionInfoById(txid) to query resp.getData().getTrxId() to get the nonce value of this deposit operation.</span>
</code></pre></div><table><thead><tr><th>Parameter</th> <th>Description</th></tr></thead> <tbody><tr><td>tokenId</td> <td>Token ID of TRC10</td></tr> <tr><td>tokenValue</td> <td>TRC10 Quantity of Assets</td></tr> <tr><td>depositFee</td> <td>Deposit fee</td></tr> <tr><td>feeLimit</td> <td>Maximum energy consumption when triggering a contract</td></tr></tbody></table> <ol start="3"><li>TRC20 token deposit</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//Pledge a certain number of designated TRC20 from the main-chain to the side-chain</span>
<span class="token class-name">SunNetworkResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TransactionResponse</span><span class="token punctuation">&gt;</span></span> resp <span class="token operator">=</span> sdk<span class="token punctuation">.</span><span class="token function">getCrossChainService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">depositTrc20</span><span class="token punctuation">(</span>contractAddrStr<span class="token punctuation">,</span> num<span class="token punctuation">,</span> depositFee<span class="token punctuation">,</span> feeLimit<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//Return value: Use sdk.getSideChainService().getTransactionInfoById(txid) to query resp.getData().getTrxId() to get the nonce value of this deposit operation.</span>
</code></pre></div><table><thead><tr><th>Parameter</th> <th>Description</th></tr></thead> <tbody><tr><td>contractAddrStr</td> <td>Main-chain TRC20 Contract Address</td></tr> <tr><td>num</td> <td>TRC20 Asset Quantity</td></tr> <tr><td>depositFee</td> <td>Deposit fee</td></tr> <tr><td>feeLimit</td> <td>Maximum energy consumption when triggering a contract</td></tr></tbody></table> <ol start="4"><li>TRC721 token deposit</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//Pledge a certain number of designated TRC721 from the main-chain to the side-chain</span>
<span class="token class-name">SunNetworkResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TransactionResponse</span><span class="token punctuation">&gt;</span></span> resp <span class="token operator">=</span> sdk<span class="token punctuation">.</span><span class="token function">getCrossChainService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">depositTrc721</span><span class="token punctuation">(</span>contractAddrStr<span class="token punctuation">,</span> num<span class="token punctuation">,</span> depositFee<span class="token punctuation">,</span> feeLimit<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//Return value: Use sdk.getSideChainService().getTransactionInfoById(txid) to query resp.getData().getTrxId() to get the nonce value of this deposit operation.</span>
</code></pre></div><table><thead><tr><th>Parameter</th> <th>Description</th></tr></thead> <tbody><tr><td>ContractAddrStr</td> <td>Main-chain TRC721 Contract Address</td></tr> <tr><td>num</td> <td>TRC721 Asset Quantity</td></tr> <tr><td>depositFee</td> <td>Deposit fee</td></tr> <tr><td>feeLimit</td> <td>Maximum energy consumption when triggering a contract</td></tr></tbody></table> <h4 id="withdraw"><a href="#withdraw" class="header-anchor">#</a> Withdraw</h4> <ol><li>TRX withdraw</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//Exit a certain number of TRX from the side-chain to the main-chain</span>
<span class="token class-name">SunNetworkResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TransactionResponse</span><span class="token punctuation">&gt;</span></span> resp <span class="token operator">=</span> sdk<span class="token punctuation">.</span><span class="token function">getCrossChainService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withdrawTrx</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span> withdrawFee<span class="token punctuation">,</span> feeLimit<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//Return value: Use sdk.getSideChainService().getTransactionInfoById(txid) to query resp.getData().getTrxId() to get the nonce value of this withdraw operation.</span>
</code></pre></div><table><thead><tr><th>Parameter</th> <th>Description</th></tr></thead> <tbody><tr><td>num</td> <td>TRX Quantity (Unit SUN)</td></tr> <tr><td>withdrawFee</td> <td>Withdraw fee</td></tr> <tr><td>feeLimit</td> <td>Maximum energy consumption when triggering a contract</td></tr></tbody></table> <ol start="2"><li>TRC10 token withdraw</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//Pledge a certain number of designated TRC10 from the side-chain to the main-chain</span>
<span class="token class-name">SunNetworkResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TransactionResponse</span><span class="token punctuation">&gt;</span></span> resp <span class="token operator">=</span> sdk<span class="token punctuation">.</span><span class="token function">getCrossChainService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withdrawTrc10</span><span class="token punctuation">(</span>tokenId<span class="token punctuation">,</span> tokenValue<span class="token punctuation">,</span> withdrawFee<span class="token punctuation">,</span> feeLimit<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//Return value: Use sdk.getSideChainService().getTransactionInfoById(txid) to query resp.getData().getTrxId() to get the nonce value of this withdraw operation.</span>
</code></pre></div><table><thead><tr><th>Parameter</th> <th>Description</th></tr></thead> <tbody><tr><td>tokenId</td> <td>Token ID of TRC10</td></tr> <tr><td>tokenValue</td> <td>TRC10 Quantity of Assets</td></tr> <tr><td>withdrawFee</td> <td>Withdraw fee</td></tr> <tr><td>feeLimit</td> <td>Maximum energy consumption when triggering a contract</td></tr></tbody></table> <ol start="3"><li>TRC20 token withdraw</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//Pledge a certain number of designated TRC20 from the side-chain to the main-chain</span>
<span class="token class-name">SunNetworkResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TransactionResponse</span><span class="token punctuation">&gt;</span></span> resp <span class="token operator">=</span> sdk<span class="token punctuation">.</span><span class="token function">getCrossChainService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withdrawTrc20</span><span class="token punctuation">(</span>contractAddrStr<span class="token punctuation">,</span> num<span class="token punctuation">,</span> withdrawFee<span class="token punctuation">,</span> feeLimit<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//Return value: Use sdk.getSideChainService().getTransactionInfoById(txid) to query resp.getData().getTrxId() to get the nonce value of this withdraw operation.</span>
</code></pre></div><table><thead><tr><th>Parameter</th> <th>Description</th></tr></thead> <tbody><tr><td>contractAddrStr</td> <td>Sidechain TRC20 Contract Address</td></tr> <tr><td>num</td> <td>TRC20 Asset Quantity</td></tr> <tr><td>withdrawFee</td> <td>Withdraw fee</td></tr> <tr><td>feeLimit</td> <td>Maximum energy consumption when triggering a contract</td></tr></tbody></table> <ol start="4"><li>TRC721 token withdraw</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//Pledge a certain number of designated TRC721 from the side-chain to the main-chain</span>
<span class="token class-name">SunNetworkResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TransactionResponse</span><span class="token punctuation">&gt;</span></span> resp <span class="token operator">=</span> sdk<span class="token punctuation">.</span><span class="token function">getCrossChainService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withdrawTrc721</span><span class="token punctuation">(</span>contractAddrStr<span class="token punctuation">,</span> num<span class="token punctuation">,</span> withdrawFee<span class="token punctuation">,</span> feeLimit<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//Return value: Use sdk.getSideChainService().getTransactionInfoById(txid) to query resp.getData().getTrxId() to get the nonce value of this withdraw operation.</span>
</code></pre></div><table><thead><tr><th>Parameter</th> <th>Description</th></tr></thead> <tbody><tr><td>contractAddrStr</td> <td>Sidechain TRC721 Contract Address</td></tr> <tr><td>num</td> <td>TRC721 Asset Quantity</td></tr> <tr><td>withdrawFee</td> <td>Withdraw fee</td></tr> <tr><td>feeLimit</td> <td>Maximum energy consumption when triggering a contract</td></tr></tbody></table> <h4 id="retry"><a href="#retry" class="header-anchor">#</a> Retry</h4> <ol><li>Retry deposit</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//Retry the unsuccessful main-chain deposit operation</span>
<span class="token class-name">SunNetworkResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TransactionResponse</span><span class="token punctuation">&gt;</span></span> resp <span class="token operator">=</span> sdk<span class="token punctuation">.</span><span class="token function">getCrossChainService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">retryDeposit</span><span class="token punctuation">(</span>nonce<span class="token punctuation">,</span> retryFee<span class="token punctuation">,</span> feeLimit<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><table><thead><tr><th>Parameter</th> <th>Description</th></tr></thead> <tbody><tr><td>nonce</td> <td>Deposit operation nonce value</td></tr> <tr><td>retryFee</td> <td>Retry fee</td></tr> <tr><td>feeLimit</td> <td>Maximum energy consumption when triggering a contract</td></tr></tbody></table> <ol start="2"><li>Retry withdraw</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//Retry the unsuccessful side-chain withdraw operation</span>
<span class="token class-name">SunNetworkResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TransactionResponse</span><span class="token punctuation">&gt;</span></span> resp <span class="token operator">=</span> sdk<span class="token punctuation">.</span><span class="token function">getCrossChainService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">retryWithdraw</span><span class="token punctuation">(</span>nonce<span class="token punctuation">,</span> retryFee<span class="token punctuation">,</span> feeLimit<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><table><thead><tr><th>Parameter</th> <th>Description</th></tr></thead> <tbody><tr><td>nonce</td> <td>Withdraw operation nonce value</td></tr> <tr><td>retryFee</td> <td>Retry fee</td></tr> <tr><td>feeLimit</td> <td>Maximum energy consumption when triggering a contract</td></tr></tbody></table> <ol start="3"><li>Retry mapping</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//Retry the unsuccessful main-chain mapping operation</span>
<span class="token class-name">SunNetworkResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TransactionResponse</span><span class="token punctuation">&gt;</span></span> resp <span class="token operator">=</span> sdk<span class="token punctuation">.</span><span class="token function">getCrossChainService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">retryMapping</span><span class="token punctuation">(</span>nonce<span class="token punctuation">,</span> retryFee<span class="token punctuation">,</span> feeLimit<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><table><thead><tr><th>Parameter</th> <th>Description</th></tr></thead> <tbody><tr><td>nonce</td> <td>Mapping operation's nonce value</td></tr> <tr><td>retryFee</td> <td>Retry fee</td></tr> <tr><td>feeLimit</td> <td>Maximum energy consumption when triggering a contract</td></tr></tbody></table> <h3 id="side-chain-interfaces"><a href="#side-chain-interfaces" class="header-anchor">#</a> Side-chain interfaces</h3> <ol><li>Fund injection</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//Investors from the side-chain will inject funds into the side-chain fund pool</span>
<span class="token class-name">SunNetworkResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TransactionResponse</span><span class="token punctuation">&gt;</span></span> resp <span class="token operator">=</span> sdk<span class="token punctuation">.</span><span class="token function">getMainChainService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fundInject</span><span class="token punctuation">(</span>amount<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><table><thead><tr><th>Parameter</th> <th>Description</th></tr></thead> <tbody><tr><td>amount</td> <td>Quantity of funds injected into the side-chain fund pool (unit SUN)</td></tr></tbody></table> <ol start="2"><li>Proposal on side-chain</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//Query side-chain all proposal list information</span>
<span class="token class-name">SunNetworkResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TransactionResponse</span><span class="token punctuation">&gt;</span></span> resp <span class="token operator">=</span> sdk<span class="token punctuation">.</span><span class="token function">getSideChainService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">listProposals</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//Parameter: None</span>

</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//Query side-chain proposal information according to the proposal number</span>
<span class="token class-name">SunNetworkResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TransactionResponse</span><span class="token punctuation">&gt;</span></span> resp <span class="token operator">=</span> <span class="token function">getSideChainService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getProposal</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><table><thead><tr><th>Parameter</th> <th>Description</th></tr></thead> <tbody><tr><td>id</td> <td>Proposal number</td></tr></tbody></table> <ol start="3"><li>Get chain parameters on Side-chain</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//Query all the parameters of the side-chain blockchain committee can be set</span>
<span class="token class-name">SunNetworkResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TransactionResponse</span><span class="token punctuation">&gt;</span></span> resp <span class="token operator">=</span> <span class="token function">getSideChainService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSideChainParameters</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="main-chain-interfaces"><a href="#main-chain-interfaces" class="header-anchor">#</a> Main-chain interfaces</h3> <ol><li>Proposal on Main-chain</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//Query all the proposal list information of the main-chain</span>
<span class="token class-name">SunNetworkResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TransactionResponse</span><span class="token punctuation">&gt;</span></span> resp <span class="token operator">=</span> sdk<span class="token punctuation">.</span><span class="token function">getMainChainService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">listProposals</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//Query side-chain proposal information according to the proposal number</span>
<span class="token class-name">SunNetworkResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TransactionResponse</span><span class="token punctuation">&gt;</span></span> resp <span class="token operator">=</span> <span class="token function">getMainChainService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getProposal</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><table><thead><tr><th>Parameter</th> <th>Description</th></tr></thead> <tbody><tr><td>id</td> <td>Proposal number</td></tr></tbody></table> <ol start="2"><li>Get chain parameters on Main-chain</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//Query all the parameters of the main-chain blockchain committee can be set</span>
<span class="token class-name">SunNetworkResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TransactionResponse</span><span class="token punctuation">&gt;</span></span> resp <span class="token operator">=</span> <span class="token function">getMainChainService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getChainParameters</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="common-interfaces-of-main-chain-and-sidechain"><a href="#common-interfaces-of-main-chain-and-sidechain" class="header-anchor">#</a> Common interfaces of main-chain and sidechain</h3> <ol><li>Get current user address</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//Get the address of the current user of sdk</span>
<span class="token class-name">SunNetworkResponse</span><span class="token operator">&lt;</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> resp <span class="token operator">=</span> <span class="token function">getChainService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><ol start="2"><li>Get current user account balance</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//Get the current user's TRX sdk</span>
<span class="token class-name">SunNetworkResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token keyword">long</span><span class="token punctuation">&gt;</span></span> resp <span class="token operator">=</span> <span class="token function">getChainService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getBalance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><ol start="3"><li>Get current user status</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//Get account information based on the address</span>
<span class="token class-name">SunNetworkResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Account</span><span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> <span class="token function">getChainService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAccount</span><span class="token punctuation">(</span>address<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="4"><li>TRX transferring</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//Transfer the TRX operation</span>
<span class="token class-name">SunNetworkResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TransactionResponse</span><span class="token punctuation">&gt;</span></span> <span class="token operator">=</span> <span class="token function">getChainService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sendCoin</span><span class="token punctuation">(</span>toAddress<span class="token punctuation">,</span> amount<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="5"><li>TRC10 token transferring</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//Transfer the TRC10 operation</span>
<span class="token class-name">SunNetworkResponse</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TransactionResponse</span><span class="token punctuation">&gt;</span></span> <span class="token operator">=</span> <span class="token function">getChainService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">transferAsset</span><span class="token punctuation">(</span>toAddress<span class="token punctuation">,</span> assertName<span class="token punctuation">,</span> amount<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="vi-sunweb"><a href="#vi-sunweb" class="header-anchor">#</a> VI. SunWeb</h2> <p>SunWeb inherits from <a href="https://developers.tron.network/docs/tron-web-intro" target="_blank" rel="noopener noreferrer">TronWeb<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and services for SUN Network. We encapsulated two objects (main-chain and sidechain) based on TronWeb. The methods and attributes in main-chain or side-chain are exactly the same as the tronweb instance. For example, users can use sunWeb.mainchain.trx.getBalance() to get balance from the mainchain. Futhermore, we add some new methods which are as follows in SunWeb class so that users can use them to contact between the main-chain and the side-chain. And users can visit the source code from <a href="https://github.com/tronprotocol/sun-network/tree/develop/js-sdk" target="_blank" rel="noopener noreferrer">github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h3 id="sunweb-class"><a href="#sunweb-class" class="header-anchor">#</a> SunWeb class</h3> <h4 id="subweb-instantiation"><a href="#subweb-instantiation" class="header-anchor">#</a> SubWeb instantiation</h4> <p>To use the SunWeb library in your App, you need to instantiate Sunweb.</p> <p>You can instantiate SunWeb like this:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> sunWeb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SunWeb</span><span class="token punctuation">(</span>
  mainchain<span class="token punctuation">,</span>
  sidechain<span class="token punctuation">,</span>
  mainGatewayAddress<span class="token punctuation">,</span>
  sideGatewayAddress<span class="token punctuation">,</span>
  sideChainId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Among them, mainchain and sidechain are the instance of TronWeb. Mainchain is used to connect with the main network, sidechain is used to connect with the DApp Chain. Reference of TronWeb instantiation is <a href="https://developers.tron.network/reference#tronwebapi" target="_blank" rel="noopener noreferrer">here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>For example, you can create a SunWeb instance connected to sun network test-net like:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> mainchain <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TronWeb</span><span class="token punctuation">(</span> <span class="token punctuation">{</span>
    fullNode<span class="token punctuation">:</span> <span class="token string">'http://47.252.84.158:8090'</span><span class="token punctuation">,</span>
    solidityNode<span class="token punctuation">:</span> <span class="token string">'http://47.252.84.158:8090'</span><span class="token punctuation">,</span>
    eventServer<span class="token punctuation">:</span> <span class="token string">'http://47.252.84.141:8080'</span><span class="token punctuation">,</span>
    privateKey
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> sidechain <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TronWeb</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    fullNode<span class="token punctuation">:</span> <span class="token string">'http://47.252.85.90:8090'</span><span class="token punctuation">,</span>
    solidityNode<span class="token punctuation">:</span> <span class="token string">'http://47.252.85.90:8091'</span><span class="token punctuation">,</span>
    eventServer<span class="token punctuation">:</span> <span class="token string">'http://47.252.85.90:8090'</span><span class="token punctuation">,</span>
    privateKey
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> sunWeb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SunWeb</span><span class="token punctuation">(</span>
  mainchain<span class="token punctuation">,</span>
  sidechain<span class="token punctuation">,</span>
  <span class="token string">'TGHxhFu4jV4XqMGmk3tEQdSeihWVHE9kBP'</span><span class="token punctuation">,</span>
  <span class="token string">'TBHr5KpbA7oACUysTKxHiAD7c6X6nkZii1'</span><span class="token punctuation">,</span>
  <span class="token string">'41455CB714D762DC46D490EAB37BBA67B0BA910A59'</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>After instantiation, you may use sunWeb to connect between main-chain and side-chain.</p> <h3 id="asset-deposit"><a href="#asset-deposit" class="header-anchor">#</a> Asset deposit</h3> <p>deposit asset from main-chain to side-chain</p> <h4 id="deposittrx"><a href="#deposittrx" class="header-anchor">#</a> depositTrx</h4> <h5 id="deposit-trx-from-main-chain-to-side-chain"><a href="#deposit-trx-from-main-chain-to-side-chain" class="header-anchor">#</a> deposit trx from main-chain to side-chain</h5> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// Format</span>
sunWeb<span class="token punctuation">.</span><span class="token function">depostiTrx</span><span class="token punctuation">(</span>callValue<span class="token punctuation">,</span> depositFee<span class="token punctuation">,</span> feeLimit<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// example</span>
sunWeb<span class="token punctuation">.</span><span class="token function">depositTrx</span><span class="token punctuation">(</span><span class="token number">100000000</span><span class="token punctuation">,</span> <span class="token number">10000000</span><span class="token punctuation">,</span> <span class="token number">1000000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="arguments"><a href="#arguments" class="header-anchor">#</a> Arguments</h5> <table><thead><tr><th>Parameter</th> <th>Description</th> <th>Type</th> <th>Options</th></tr></thead> <tbody><tr><td>callValue</td> <td>Amount of TRX (Units in SUN) to deposit</td> <td>Integer (Units in SUN)</td> <td>Required</td></tr> <tr><td>depositFee</td> <td>Despoit fee</td> <td>Integer (Units in SUN)</td> <td>Required</td></tr> <tr><td>feeLimit</td> <td>Cost limit</td> <td>Integer, long</td> <td>Required</td></tr> <tr><td>options</td> <td>The permissions Id</td> <td>Object</td> <td>Optional</td></tr></tbody></table> <h4 id="deposittrc10"><a href="#deposittrc10" class="header-anchor">#</a> depositTrc10</h4> <h5 id="deposit-trc10-token-from-main-chain-to-side-chain"><a href="#deposit-trc10-token-from-main-chain-to-side-chain" class="header-anchor">#</a> deposit TRC10 token from main-chain to side-chain</h5> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// format</span>
sunWeb<span class="token punctuation">.</span><span class="token function">depositTrc10</span><span class="token punctuation">(</span>tokenId<span class="token punctuation">,</span> tokenValue<span class="token punctuation">,</span> depositFee<span class="token punctuation">,</span> feeLimit<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// example</span>
sunWeb<span class="token punctuation">.</span><span class="token function">depositTrc10</span><span class="token punctuation">(</span><span class="token number">100059</span><span class="token punctuation">,</span> <span class="token number">10000000</span><span class="token punctuation">,</span> <span class="token number">10000000</span>， <span class="token number">100000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="arguments-2"><a href="#arguments-2" class="header-anchor">#</a> Arguments</h5> <table><thead><tr><th>Parameter</th> <th>Description</th> <th>Type</th> <th>Options</th></tr></thead> <tbody><tr><td>tokenId</td> <td>Token Id of trc10</td> <td>Integer</td> <td>Required</td></tr> <tr><td>tokenValue</td> <td>Amount of trc10 token to deposit</td> <td>Integer</td> <td>Required</td></tr> <tr><td>depositFee</td> <td>Despoit fee</td> <td>Integer (Units in SUN)</td> <td>Required</td></tr> <tr><td>feeLimit</td> <td>Cost limit</td> <td>Integer, long</td> <td>Required</td></tr> <tr><td>options</td> <td>The permissions Id</td> <td>Object</td> <td>Optional</td></tr></tbody></table> <h4 id="deposittrc20"><a href="#deposittrc20" class="header-anchor">#</a> depositTrc20</h4> <h5 id="deposit-trc20-token-from-main-chain-to-side-chain"><a href="#deposit-trc20-token-from-main-chain-to-side-chain" class="header-anchor">#</a> deposit TRC20 token from main-chain to side-chain</h5> <p>Note: You have to mapping TRC20 contract to side-chain with the mappingTrc20 function provided by SunWeb. Then you also have to use the approveTrc20 function. Only done with the two steps before, you can depositTrc20 from main-chain to side-chain.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// format</span>
sunWeb<span class="token punctuation">.</span><span class="token function">depositTrc20</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span> depositFee<span class="token punctuation">,</span> feeLimit<span class="token punctuation">,</span> contractAddress<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// example</span>
sunWeb<span class="token punctuation">.</span><span class="token function">depositTrc20</span><span class="token punctuation">(</span><span class="token number">1000000</span><span class="token punctuation">,</span> <span class="token number">10000000</span><span class="token punctuation">,</span> <span class="token number">1000000</span><span class="token punctuation">,</span> <span class="token string">'TD9Jrm546pGkzRu7K5nitMxk8nn75wXNkQ'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="arguments-3"><a href="#arguments-3" class="header-anchor">#</a> Arguments</h5> <table><thead><tr><th>Parameter</th> <th>Description</th> <th>Type</th> <th>Options</th></tr></thead> <tbody><tr><td>num</td> <td>Amount of TRC20 to deposit</td> <td>Integer</td> <td>Required</td></tr> <tr><td>depositFee</td> <td>Despoit fee</td> <td>Integer (Units in SUN)</td> <td>Required</td></tr> <tr><td>feeLimit</td> <td>Cost limit</td> <td>Integer, long</td> <td>Required</td></tr> <tr><td>contractAddress</td> <td>Main-chain TRC20 Contract Address</td> <td>String</td> <td>Required</td></tr> <tr><td>options</td> <td>The permissions Id</td> <td>Object</td> <td>Optional</td></tr></tbody></table> <h4 id="deposittrc721"><a href="#deposittrc721" class="header-anchor">#</a> depositTrc721</h4> <h5 id="deposit-trc721-token-from-main-chain-to-side-chain"><a href="#deposit-trc721-token-from-main-chain-to-side-chain" class="header-anchor">#</a> deposit TRC721 token from main-chain to side-chain</h5> <p>Note: You have to use mappingTrc721 and approveTrc721 before depositTrc721 like depositTrc20.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// format</span>
sunWeb<span class="token punctuation">.</span><span class="token function">depositTrc721</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> depositFee<span class="token punctuation">,</span> feeLimit<span class="token punctuation">,</span> contractAddress<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// example</span>
sunWeb<span class="token punctuation">.</span><span class="token function">depositTrc10</span><span class="token punctuation">(</span><span class="token number">1000000</span><span class="token punctuation">,</span> <span class="token number">10000000</span><span class="token punctuation">,</span> <span class="token number">1000000</span><span class="token punctuation">,</span> <span class="token string">'TCLRqK6aP2xsCZWhE2smkYzdRHf9uvyz5P'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="arguments-4"><a href="#arguments-4" class="header-anchor">#</a> Arguments</h5> <table><thead><tr><th>Parameter</th> <th>Description</th> <th>Type</th> <th>Options</th></tr></thead> <tbody><tr><td>id</td> <td>Id of TRC721 to deposit</td> <td>Integer</td> <td>Required</td></tr> <tr><td>depositFee</td> <td>Despoit fee</td> <td>Integer (Units in SUN)</td> <td>Required</td></tr> <tr><td>feeLimit</td> <td>cost limit</td> <td>Integer, long</td> <td>Required</td></tr> <tr><td>contractAddress</td> <td>Main-chain TRC721 Contract Address</td> <td>String</td> <td>Required</td></tr> <tr><td>options</td> <td>The permissions Id</td> <td>Object</td> <td>Optional</td></tr></tbody></table> <h3 id="asset-approve"><a href="#asset-approve" class="header-anchor">#</a> Asset approve</h3> <p>Before depositTrc20 and depositTrc721, you should call the approve function.</p> <h4 id="approvetrc20"><a href="#approvetrc20" class="header-anchor">#</a> approveTrc20</h4> <h5 id="approve-trc20-token"><a href="#approve-trc20-token" class="header-anchor">#</a> Approve TRC20 token</h5> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// format</span>
sunWeb<span class="token punctuation">.</span><span class="token function">approveTrc20</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span> feeLimit<span class="token punctuation">,</span> contractAddress<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// example</span>
sunWeb<span class="token punctuation">.</span><span class="token function">approveTrc20</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">,</span> <span class="token number">10000000</span><span class="token punctuation">,</span> <span class="token string">'TGKuXDnvdHv9RNE6BPXUtNLK2FrVMBDAuA'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="arguments-5"><a href="#arguments-5" class="header-anchor">#</a> Arguments</h5> <table><thead><tr><th>Parameter</th> <th>Description</th> <th>Type</th> <th>Options</th></tr></thead> <tbody><tr><td>Num</td> <td>Num of TRC20</td> <td>Integer</td> <td>Required</td></tr> <tr><td>contractAddress</td> <td>Main-chain TRC20 Contract Address</td> <td>String</td> <td>Required</td></tr> <tr><td>feeLimit</td> <td>Cost limit</td> <td>Integer, long</td> <td>Required</td></tr> <tr><td>options</td> <td>The permissions Id</td> <td>Object</td> <td>Optional</td></tr></tbody></table> <h4 id="approvetrc721"><a href="#approvetrc721" class="header-anchor">#</a> approveTrc721</h4> <h5 id="approve-trc721-token"><a href="#approve-trc721-token" class="header-anchor">#</a> Approve TRC721 token</h5> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// format</span>
sunWeb<span class="token punctuation">.</span><span class="token function">approveTrc721</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> feeLimit<span class="token punctuation">,</span> contractAddress<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// example</span>
sunWeb<span class="token punctuation">.</span><span class="token function">approveTrc721</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">10000000</span><span class="token punctuation">,</span> <span class="token string">'TUxDmFbEceGgjWCb6rLVcrFgnsWwofPdPq'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="arguments-6"><a href="#arguments-6" class="header-anchor">#</a> Arguments</h5> <table><thead><tr><th>Parameter</th> <th>Description</th> <th>Type</th> <th>Options</th></tr></thead> <tbody><tr><td>Num</td> <td>Id of TRC721</td> <td>Integer</td> <td>Required</td></tr> <tr><td>contractAddress</td> <td>Main-chain TRC721 Contract Address</td> <td>String</td> <td>Required</td></tr> <tr><td>feeLimit</td> <td>Cost limit</td> <td>Integer, long</td> <td>Required</td></tr> <tr><td>options</td> <td>The permissions Id</td> <td>Object</td> <td>Optional</td></tr></tbody></table> <h3 id="asset-mapping"><a href="#asset-mapping" class="header-anchor">#</a> Asset mapping</h3> <h4 id="mappingtrc20"><a href="#mappingtrc20" class="header-anchor">#</a> mappingTrc20</h4> <h5 id="mapping-trc20-token-to-side-chain"><a href="#mapping-trc20-token-to-side-chain" class="header-anchor">#</a> mapping TRC20 token to side-chain</h5> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// format</span>
<span class="token function">mappingTrc20</span><span class="token punctuation">(</span>trxHash<span class="token punctuation">,</span> mappingFee<span class="token punctuation">,</span> feeLimit<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// example</span>
<span class="token function">mappingTrc20</span><span class="token punctuation">(</span><span class="token string">'548442d9080605a60adf1d30cc126a2b9c6308cbe9ec224f8c67a6c2590fa299'</span><span class="token punctuation">,</span> <span class="token number">100000</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="arguments-7"><a href="#arguments-7" class="header-anchor">#</a> Arguments</h5> <table><thead><tr><th>Parameter</th> <th>Description</th> <th>Type</th> <th>Options</th></tr></thead> <tbody><tr><td>trxHash</td> <td>The hash value of the transaction for the main-chain deployment TRC20 contract</td> <td>Hex string</td> <td>Required</td></tr> <tr><td>mappingFee</td> <td>Mapping Fee</td> <td>Integer(units in SUN)</td> <td>Required</td></tr> <tr><td>feeLimit</td> <td>cost limit</td> <td>Integer, long</td> <td>Required</td></tr> <tr><td>options</td> <td>The permissions Id</td> <td>Object</td> <td>Optional</td></tr></tbody></table> <h4 id="mappingtrc721"><a href="#mappingtrc721" class="header-anchor">#</a> mappingTrc721</h4> <h5 id="mapping-trc721-token-to-side-chain"><a href="#mapping-trc721-token-to-side-chain" class="header-anchor">#</a> mapping TRC721 token to side-chain</h5> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// format</span>
<span class="token function">mappingTrc721</span><span class="token punctuation">(</span>trxHash<span class="token punctuation">,</span> mappingFee<span class="token punctuation">,</span> feeLimit<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// example</span>
<span class="token function">mappingTrc721</span><span class="token punctuation">(</span><span class="token string">'548442d9080605a60adf1d30cc126a2b9c6308cbe9ec224f8c67a6c2590fa299'</span><span class="token punctuation">,</span> <span class="token number">100000</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="arguments-8"><a href="#arguments-8" class="header-anchor">#</a> Arguments</h5> <table><thead><tr><th>Parameter</th> <th>Description</th> <th>Type</th> <th>Options</th></tr></thead> <tbody><tr><td>trxHash</td> <td>The hash value of the transaction for the main-chain deployment TRC721 contract</td> <td>Hex string</td> <td>Required</td></tr> <tr><td>mappingFee</td> <td>Mapping Fee</td> <td>Integer(units in SUN)</td> <td>Required</td></tr> <tr><td>feeLimit</td> <td>cost limit</td> <td>Integer, long</td> <td>Required</td></tr> <tr><td>options</td> <td>The permissions Id</td> <td>Object</td> <td>Optional</td></tr></tbody></table> <h3 id="asset-withdraw"><a href="#asset-withdraw" class="header-anchor">#</a> Asset withdraw</h3> <h4 id="withdrawtrx"><a href="#withdrawtrx" class="header-anchor">#</a> withdrawTrx</h4> <h5 id="withdraw-trx-from-side-chain-to-main-chain"><a href="#withdraw-trx-from-side-chain-to-main-chain" class="header-anchor">#</a> Withdraw trx from side-chain to main-chain</h5> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// Format</span>
sunWeb<span class="token punctuation">.</span><span class="token function">withdrawTrx</span><span class="token punctuation">(</span>callValue<span class="token punctuation">,</span> withdrawFee<span class="token punctuation">,</span> feeLimit<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// example</span>
sunWeb<span class="token punctuation">.</span><span class="token function">withdrawTrx</span><span class="token punctuation">(</span><span class="token number">100000000</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">,</span> <span class="token number">1000000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="arguments-9"><a href="#arguments-9" class="header-anchor">#</a> Arguments</h5> <table><thead><tr><th>Parameter</th> <th>Description</th> <th>Type</th> <th>Options</th></tr></thead> <tbody><tr><td>callValue</td> <td>Amount of TRX (Units in SUN) to deposit</td> <td>Integer (Units in SUN)</td> <td>Required</td></tr> <tr><td>withdrawFee</td> <td>Withdraw Fee</td> <td>Integer(Units in SUN)</td> <td>Required</td></tr> <tr><td>feeLimit</td> <td>Cost limit</td> <td>Integer, long</td> <td>Required</td></tr> <tr><td>options</td> <td>The permissions Id</td> <td>Object</td> <td>Optional</td></tr></tbody></table> <h4 id="withdrawtrc10"><a href="#withdrawtrc10" class="header-anchor">#</a> withdrawTrc10</h4> <h5 id="withdraw-trc10-token-from-side-chain-to-main-chain"><a href="#withdraw-trc10-token-from-side-chain-to-main-chain" class="header-anchor">#</a> Withdraw TRC10 token from side-chain to main-chain</h5> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// format</span>
sunWeb<span class="token punctuation">.</span><span class="token function">withdrawTrc10</span><span class="token punctuation">(</span>tokenId<span class="token punctuation">,</span> tokenValue<span class="token punctuation">,</span> withdrawFee<span class="token punctuation">,</span> feeLimit<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// example</span>
sunWeb<span class="token punctuation">.</span><span class="token function">withdrawTrc10</span><span class="token punctuation">(</span><span class="token number">100059</span><span class="token punctuation">,</span> <span class="token number">10000000</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">,</span> <span class="token number">100000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="arguments-10"><a href="#arguments-10" class="header-anchor">#</a> Arguments</h5> <table><thead><tr><th>Parameter</th> <th>Description</th> <th>Type</th> <th>Options</th></tr></thead> <tbody><tr><td>tokenId</td> <td>Token Id of TRC10</td> <td>Integer</td> <td>Required</td></tr> <tr><td>tokenValue</td> <td>Amount of TRC10 token (Units in SUN) to deposit</td> <td>Integer (Units in SUN)</td> <td>Required</td></tr> <tr><td>withdrawFee</td> <td>Withdraw Fee</td> <td>Integer(Units in SUN)</td> <td>Required</td></tr> <tr><td>feeLimit</td> <td>Cost limit</td> <td>Integer, long</td> <td>Required</td></tr> <tr><td>options</td> <td>The permissions Id</td> <td>Object</td> <td>Optional</td></tr></tbody></table> <h4 id="withdrawtrc20"><a href="#withdrawtrc20" class="header-anchor">#</a> withdrawTrc20</h4> <h5 id="withdraw-trc20-token-from-side-chain-to-main-chain"><a href="#withdraw-trc20-token-from-side-chain-to-main-chain" class="header-anchor">#</a> withdraw TRC20 token from side-chain to main-chain</h5> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// format</span>
sunWeb<span class="token punctuation">.</span><span class="token function">withdrawTrc20</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span> withdrawFee<span class="token punctuation">,</span> feeLimit<span class="token punctuation">,</span> contractAddress<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// example</span>
sunWeb<span class="token punctuation">.</span><span class="token function">withdrawTrc20</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">,</span> <span class="token number">10000000</span><span class="token punctuation">,</span> <span class="token string">'TWzXQmDoASGodMss7uPD6vUgLHnkQFX7ok'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="arguments-11"><a href="#arguments-11" class="header-anchor">#</a> Arguments</h5> <table><thead><tr><th>Parameter</th> <th>Description</th> <th>Type</th> <th>Options</th></tr></thead> <tbody><tr><td>Num</td> <td>Num of TRC20</td> <td>Integer</td> <td>Required</td></tr> <tr><td>withdrawFee</td> <td>Withdraw Fee</td> <td>Integer(units in SUN)</td> <td>Required</td></tr> <tr><td>contractAddress</td> <td>Side-chain TRC20 Contract Address after mapping</td> <td>Integer</td> <td>Required</td></tr> <tr><td>feeLimit</td> <td>Cost limit</td> <td>Integer, long</td> <td>Required</td></tr> <tr><td>options</td> <td>The permissions Id</td> <td>Object</td> <td>Optional</td></tr></tbody></table> <h4 id="withdrawtrc721"><a href="#withdrawtrc721" class="header-anchor">#</a> withdrawTrc721</h4> <h5 id="withdraw-trc721-token-from-side-chain-to-main-chain"><a href="#withdraw-trc721-token-from-side-chain-to-main-chain" class="header-anchor">#</a> withdraw TRC721 token from side-chain to main-chain</h5> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// format</span>
sunWeb<span class="token punctuation">.</span><span class="token function">withdrawTrc721</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> withdrawFee<span class="token punctuation">,</span> feeLimit<span class="token punctuation">,</span> contractAddress<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// example</span>
sunWeb<span class="token punctuation">.</span><span class="token function">withdrawTrc721</span><span class="token punctuation">(</span><span class="token number">101</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">10000000</span><span class="token punctuation">,</span> <span class="token string">'TA2xrVESq2UcEtDtgPzxNJEiLgxmMVdtFR'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="arguments-12"><a href="#arguments-12" class="header-anchor">#</a> Arguments</h5> <table><thead><tr><th>Parameter</th> <th>Description</th> <th>Type</th> <th>Options</th></tr></thead> <tbody><tr><td>id</td> <td>Id of TRC721</td> <td>Integer</td> <td>Required</td></tr> <tr><td>withdrawFee</td> <td>Withdraw Fee</td> <td>Integer(units in SUN)</td> <td>Required</td></tr> <tr><td>feeLimit</td> <td>Cost limit</td> <td>Integer, long</td> <td>Required</td></tr> <tr><td>contractAddress</td> <td>Side-chain TRC20 Contract Address after mapping</td> <td>Integer</td> <td>Required</td></tr> <tr><td>options</td> <td>The permissions Id</td> <td>Object</td> <td>Optional</td></tr></tbody></table> <h3 id="inject-fund"><a href="#inject-fund" class="header-anchor">#</a> Inject fund</h3> <p>Inject asset into the fundation of the sidechain.</p> <h4 id="injectfund"><a href="#injectfund" class="header-anchor">#</a> injectFund</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// format</span>
sunWeb<span class="token punctuation">.</span><span class="token function">injectFund</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span> feeLimit<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// example</span>
sunWeb<span class="token punctuation">.</span><span class="token function">injectFund</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">10000000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="arguments-13"><a href="#arguments-13" class="header-anchor">#</a> Arguments</h4> <table><thead><tr><th>Parameter</th> <th>Description</th> <th>Type</th> <th>Options</th></tr></thead> <tbody><tr><td>num</td> <td>num of injecting</td> <td>Integer</td> <td>Required</td></tr> <tr><td>feeLimit</td> <td>Cost limit</td> <td>Integer, long</td> <td>Required</td></tr> <tr><td>options</td> <td>The permissions Id</td> <td>Object</td> <td>Optional</td></tr></tbody></table> <h3 id="retry-2"><a href="#retry-2" class="header-anchor">#</a> Retry</h3> <h4 id="retrydeposit"><a href="#retrydeposit" class="header-anchor">#</a> retryDeposit</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// format</span>
sunWeb<span class="token punctuation">.</span><span class="token function">retryDeposit</span><span class="token punctuation">(</span>nonce<span class="token punctuation">,</span> retryDepositFee<span class="token punctuation">,</span> feeLimit<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// example</span>
sunWeb<span class="token punctuation">.</span><span class="token function">retryDeposit</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">10000000</span><span class="token punctuation">,</span> <span class="token number">10000000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="arguments-14"><a href="#arguments-14" class="header-anchor">#</a> Arguments</h4> <table><thead><tr><th>Parameter</th> <th>Description</th> <th>Type</th> <th>Options</th></tr></thead> <tbody><tr><td>nonce</td> <td>Nonce value of asset deposit</td> <td>Integer</td> <td>Required</td></tr> <tr><td>retryDepositFee</td> <td>fee of retry deposit operation</td> <td>Integer(units in SUN)</td> <td>Required</td></tr> <tr><td>feeLimit</td> <td>Cost limit</td> <td>Integer, long</td> <td>Required</td></tr> <tr><td>options</td> <td>The permissions Id</td> <td>Object</td> <td>Optional</td></tr></tbody></table> <h4 id="retrymapping"><a href="#retrymapping" class="header-anchor">#</a> retryMapping</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// format</span>
sunWeb<span class="token punctuation">.</span><span class="token function">retryMapping</span><span class="token punctuation">(</span>nonce<span class="token punctuation">,</span> retryMappingFee<span class="token punctuation">,</span> feeLimit<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// example</span>
sunWeb<span class="token punctuation">.</span><span class="token function">retryMapping</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">10000000</span><span class="token punctuation">,</span> <span class="token number">10000000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="arguments-15"><a href="#arguments-15" class="header-anchor">#</a> Arguments</h4> <table><thead><tr><th>Parameter</th> <th>Description</th> <th>Type</th> <th>Options</th></tr></thead> <tbody><tr><td>nonce</td> <td>Nonce value of asset deposit</td> <td>Integer</td> <td>Required</td></tr> <tr><td>retryMappingFee</td> <td>fee of retry mapping operation</td> <td>Integer(units in SUN)</td> <td>Required</td></tr> <tr><td>feeLimit</td> <td>Cost limit</td> <td>Integer, long</td> <td>Required</td></tr> <tr><td>options</td> <td>The permissions Id</td> <td>Object</td> <td>Optional</td></tr></tbody></table> <h4 id="retrywithdraw"><a href="#retrywithdraw" class="header-anchor">#</a> retryWithdraw</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// format</span>
sunWeb<span class="token punctuation">.</span><span class="token function">retryWithdraw</span><span class="token punctuation">(</span>nonce<span class="token punctuation">,</span> retryWithdrawFee<span class="token punctuation">,</span> feeLimit<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// example</span>
sunWeb<span class="token punctuation">.</span><span class="token function">retryWithdraw</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">10000000</span><span class="token punctuation">,</span> <span class="token number">10000000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="arguments-16"><a href="#arguments-16" class="header-anchor">#</a> Arguments</h4> <table><thead><tr><th>Parameter</th> <th>Description</th> <th>Type</th> <th>Options</th></tr></thead> <tbody><tr><td>nonce</td> <td>Nonce value of asset deposit</td> <td>Integer</td> <td>Required</td></tr> <tr><td>retryWithdrawFee</td> <td>fee of retry withdraw operation</td> <td>Integer(units in SUN)</td> <td>Required</td></tr> <tr><td>feeLimit</td> <td>Cost limit</td> <td>Integer, long</td> <td>Required</td></tr> <tr><td>options</td> <td>The permissions Id</td> <td>Object</td> <td>Optional</td></tr></tbody></table> <h3 id="signature"><a href="#signature" class="header-anchor">#</a> Signature</h3> <p>Signature of main-chain is the same as TronWeb, you can use tronWeb.trx.sign(…) as before. Such as in TronLink after overriding it, TronLink will pop up the signature confirmation dialog. While the signature of side-chain is different as TronWeb, we've overridden the sign function in TronWeb for side-chain. Please note that, when you develop a wallet like the TronLink, you may need to override sign function of main-chain and side-chain respectively.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// format</span>
<span class="token function">sign</span><span class="token punctuation">(</span><span class="token punctuation">(</span>transaction <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>privateKey <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sidechain<span class="token punctuation">.</span>defaultPrivateKey<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>useTronHeader <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>multisig <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="vii-register-as-a-super-representative-witness"><a href="#vii-register-as-a-super-representative-witness" class="header-anchor">#</a> VII. Register as a Super Representative (Witness).</h2> <p>Community is welcomed to join DAppChain ecosystem. Due to the incentive mechanism difference between SideChain and TRON network, SUN Network will support Community SR step by step.</p> <p>SideChain SR use a reward pool concept for chain rewarding, all the income from SideChain will be inject to reward pool and distribute most of the reward to SRs.</p> <p><strong>Since the lacking of user on SideChain when the SideChain is set up, all the reward will be accumulated to reward pool and SR will not get block generated reward.</strong> When SideChain ecosystem reach a larger level, we will allow Community to become SR through a proposal. This would guarantee SR to get steady and considerable income, and also make SideChain more decentralized.</p> <p>SR reward is a floating number. In theory, the richer the ecosystem (high TPS), the more TRX SR will gain.</p> <h2 id="viii-deploy-your-own-side-chain"><a href="#viii-deploy-your-own-side-chain" class="header-anchor">#</a> VIII. Deploy your own side-chain</h2> <h3 id="get-started"><a href="#get-started" class="header-anchor">#</a> Get started</h3> <h4 id="_1-deloy-main-chain-gateway-contract-create-related-accounts-configurate-fullnode-on-main-chain"><a href="#_1-deloy-main-chain-gateway-contract-create-related-accounts-configurate-fullnode-on-main-chain" class="header-anchor">#</a> 1. Deloy <em>main-chain</em> gateway contract. Create related Accounts. Configurate fullnode on <em>main-chain</em>.</h4> <ul><li>i. create an account Onwer as <em>main-chain</em> gateway contract deployer and <em>side-chain</em> owner. Give sufficient balance to Onwer.</li> <li>ii. create multiple account O1-On as Genesis Oracle group.</li> <li>iii. Owner deploys the main-chain-gateway contract in the main-chain with wallet-cli, get the contract address C1
<ul><li>wallet-cli command: <code>deploycontract ...</code></li></ul></li> <li>iv. Use C1 to generate <em>side-chain</em> id</li> <li>v. Add oracles by calling addOracle (address) method in the <em>main-chain</em> gateway contract.
<ul><li>wallet-cli command: <code>triggercontract $main_gateway addOracle(address) $new_oracle false 1000000000 0 0 #</code></li></ul></li> <li>vi. Activate each oracle on the main-chain and ensure that each oracle gets sufficient balance.
<ul><li>wallet-cli command: <code>sendcoin $oracle_address value</code></li></ul></li> <li>vii. Start the <em>fullnode</em> of the <em>main-chain</em>, configure <em>kafka</em>, connect to the <em>java-tron's</em> <em>main-chain</em> (<em>main-network</em> or <em>test-network</em> or private network for testing)
* Download event-plugin, check: <code>https://github.com/tronprotocol/event-plugin</code> <ul><li>Configure kafka, check: <code>https://github.com/tronprotocol/event-plugin</code></li> <li>Configure event.subscribe and start fullnode:</li></ul></li></ul> <blockquote><p>Configuration file:</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>event.subscribe = {
    path = &quot;zip absolute path&quot; // absolute path of plugin
    server = &quot;kafka ip:kafka port&quot; // target server address to receive event triggers
    dbconfig=&quot;&quot; // dbname|username|password
    topics = [
        {
          triggerName = &quot;block&quot; // block trigger, the value can't be modified
          enable = false
          topic = &quot;block&quot; // plugin topic, the value could be modified
        },
        {
          triggerName = &quot;transaction&quot;
          enable = false
          topic = &quot;transaction&quot;
        },
        {
          triggerName = &quot;contractevent&quot;
          enable = true
          topic = &quot;contractevent&quot;
        },
        {
          triggerName = &quot;contractlog&quot;
          enable = true
          topic = &quot;contractlog&quot;
        }
    ]
 
    filter = {
       fromblock = &quot;&quot; // the value could be &quot;&quot;, &quot;earliest&quot; or a specified block number as the beginning of the queried range
       toblock = &quot;&quot; // the value could be &quot;&quot;, &quot;latest&quot; or a specified block number as end of the queried range
       contractAddress = [
           &quot;&quot; // contract address you want to subscribe, if it's set to &quot;&quot;, you will receive contract logs/events with any contract address.
       ]
 
       contractTopic = [
           &quot;&quot; // contract topic you want to subscribe, if it's set to &quot;&quot;, you will receive contract logs/events with any contract topic.
       ]
    }
}
</code></pre></div><h4 id="_2-sun-cli"><a href="#_2-sun-cli" class="header-anchor">#</a> 2. Sun-cli</h4> <ul><li>i. Write the main-chain, side-chain nodes list, main-chain gateway address in the configuration file</li></ul> <blockquote><p>configuration file:</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>mainchain {
  net {
    type = mainnet
  }

  fullnode = {
    ip.list = [
      &quot;&quot;
    ]
  }

  RPC_version = 2

  gateway_address = &quot;&quot;
}

sidechain {
  net {
    type = mainnet
  }

  fullnode = {
    ip.list = [
    ]
  }


  RPC_version = 2
  gateway_address = &quot;&quot;

  sideChainId = &quot;&quot;
}
</code></pre></div><ul><li><p>ii. Note <code>mainchain.gateway_address</code> should be set.</p> <ul><li><code>gateway_address = &quot;TAcLUguLig3n6zCC5BQQxwSJbFwJseAxQB&quot;</code></li></ul></li> <li><p>iii. start Sun-cli now</p></li></ul> <h4 id="_3-configuration-the-side-chain"><a href="#_3-configuration-the-side-chain" class="header-anchor">#</a> 3. Configuration the side-chain</h4> <ul><li>i. Create several GR for <em>side-chain</em>. Save the generated private key for the new addresses.</li> <li>ii. Start the side-chain witness node. Set Owner, GR, GO, and node list in configuration file.</li></ul> <blockquote><p>configuration file:</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>net {
  type = mainnet
  # type = testnet
}

storage {
  # Directory for storing persistent data

  db.directory = &quot;database&quot;,
  index.directory = &quot;index&quot;,

  # You can custom these 14 databases' configs:

  # account, account-index, asset-issue, block, block-index,
  # block_KDB, peers, properties, recent-block, trans,
  # utxo, votes, witness, witness_schedule.

  # Otherwise, db configs will remain defualt and data will be stored in
  # the path of &quot;output-directory&quot; or which is set by &quot;-d&quot; (&quot;--output-directory&quot;).

  # Attention: name is a required field that must be set !!!
  properties = [
    //    {
    //      name = &quot;account&quot;,
    //      path = &quot;storage_directory_test&quot;,
    //      createIfMissing = true,
    //      paranoidChecks = true,
    //      verifyChecksums = true,
    //      compressionType = 1,        // compressed with snappy
    //      blockSize = 4096,           // 4  KB =         4 * 1024 B
    //      writeBufferSize = 10485760, // 10 MB = 10 * 1024 * 1024 B
    //      cacheSize = 10485760,       // 10 MB = 10 * 1024 * 1024 B
    //      maxOpenFiles = 100
    //    },
    //    {
    //      name = &quot;account-index&quot;,
    //      path = &quot;storage_directory_test&quot;,
    //      createIfMissing = true,
    //      paranoidChecks = true,
    //      verifyChecksums = true,
    //      compressionType = 1,        // compressed with snappy
    //      blockSize = 4096,           // 4  KB =         4 * 1024 B
    //      writeBufferSize = 10485760, // 10 MB = 10 * 1024 * 1024 B
    //      cacheSize = 10485760,       // 10 MB = 10 * 1024 * 1024 B
    //      maxOpenFiles = 100
    //    },
  ]

}

node.discovery = {
  enable = true
  persist = true
  bind.ip = &quot;&quot;
  external.ip = null
}

node.backup {
  port = 10001
  priority = 8
  members = [
  ]
}

node {
  # trust node for solidity node
  # trustNode = &quot;ip:port&quot;
  trustNode = &quot;127.0.0.1:50051&quot;

  # expose extension api to public or not
  walletExtensionApi = true

  listen.port = 18888

  connection.timeout = 2

  tcpNettyWorkThreadNum = 0

  udpNettyWorkThreadNum = 1

  # Number of validate sign thread, default availableProcessors / 2
  # validateSignThreadNum = 16

  maxActiveNodes = 30

  maxActiveNodesWithSameIp = 2

  minParticipationRate = 0

  p2p {
    version = 201909101 # 201909101: sunnet;
  }

  active = [
    # Active establish connection in any case
    # Sample entries:
    # &quot;ip:port&quot;,
    # &quot;ip:port&quot;

  ]

  passive = [
    # Passive accept connection in any case
    # Sample entries:
    # &quot;ip:port&quot;,
    # &quot;ip:port&quot;
  ]

  http {
    fullNodePort = 8090
    solidityPort = 8091
  }

  rpc {
    port = 50051

    # Number of gRPC thread, default availableProcessors / 2
    # thread = 16

    # The maximum number of concurrent calls permitted for each incoming connection
    # maxConcurrentCallsPerConnection =

    # The HTTP/2 flow control window, default 1MB
    # flowControlWindow =

    # Connection being idle for longer than which will be gracefully terminated
    maxConnectionIdleInMillis = 60000

    # Connection lasting longer than which will be gracefully terminated
    # maxConnectionAgeInMillis =

    # The maximum message size allowed to be received on the server, default 4MB
    # maxMessageSize =

    # The maximum size of header list allowed to be received, default 8192
    # maxHeaderListSize =

    # Transactions can only be broadcast if the number of effective connections is reached.
    minEffectiveConnection = 0
  }

}


seed.node = {
  # List of the seed nodes
  # Seed nodes are stable full nodes
  # example:
  # ip.list = [
  #   &quot;ip:port&quot;,
  #   &quot;ip:port&quot;
  # ]
  ip.list = [

  ]
}

genesis.block = {
  # Reserve balance
  assets = [
    {
      accountName = &quot;Owner&quot;
      accountType = &quot;AssetIssue&quot;
      address = &quot;&quot;
      balance = &quot;0&quot;
    },
    {
      accountName = &quot;GenesisOracle1&quot;
      accountType = &quot;AssetIssue&quot;
      address = &quot;&quot;
      balance = &quot;0&quot;
    },
    {
      accountName = &quot;GenesisOracle2&quot;
      accountType = &quot;AssetIssue&quot;
      address = &quot;&quot;
      balance = &quot;0&quot;
    },
    {
      accountName = &quot;GenesisOracle3&quot;
      accountType = &quot;AssetIssue&quot;
      address = &quot;&quot;
      balance = &quot;0&quot;
    },
    {
      accountName = &quot;GenesisOracle4&quot;
      accountType = &quot;AssetIssue&quot;
      address = &quot;&quot;
      balance = &quot;0&quot;
    },
    {
      accountName = &quot;Blackhole&quot;
      accountType = &quot;AssetIssue&quot;
      address = &quot;T9yD14Nj9j7xAB4dbGeiX9h8unkKHxuWwb&quot;
      balance = &quot;-9223372036854775808&quot;
    }
  ]

  witnesses = [
    {
      address: ,
      url = &quot;http://GR1.com&quot;,
      voteCount = 100000004
    },
    {
      address: ,
      url = &quot;http://GR2.com&quot;,
      voteCount = 100000003
    },
    {
      address: ,
      url = &quot;http://GR3.com&quot;,
      voteCount = 100000002
    },
    {
      address: ,
      url = &quot;http://GR4.com&quot;,
      voteCount = 100000001
    },
    {
      address: ,
      url = &quot;http://GR5.com&quot;,
      voteCount = 100000000
    }
  ]

  timestamp = &quot;0&quot; #2017-8-26 12:00:00

  # mandatory to have sideChainId
  sideChainId = &quot;&quot;
}

#localwitness = [
#]

localwitnesskeystore = [
   &quot;localwitnesskeystore.json&quot;
]

block = {
  needSyncCheck = true
  maintenanceTimeInterval = 21600000 // 6 hours: 21600000(ms)
  proposalExpireTime = 64800000 // 18 hours: 64800000(ms)
}

trx.reference.block = &quot;solid&quot; //head;solid

vm = {
  supportConstant = true
  minTimeRatio = 0.0
  maxTimeRatio = 10.0
  saveInternalTx = true

  # In rare cases, transactions that will be within the specified maximum execution time (default 10(ms)) are re-executed and packaged
  # longRunningTime = 10
}

committee = {
  chargingSwitchOn = 0
  # voteSwitch = 0 // for test only
}

sidechain = {
  chargingType = 0   //0:trx, 1:sun_token
  //chargingBandwidth = 1   //0:off, 1:on  if committee.chargingSwitchOn == 0, chargingBandwidth is always off
  energyFee = 5 // 1 sun per energy, can not be 0    proposal 11
  totalEnergyLimit = 100000000000 // 100_000_000_000 frozen energy limit
  maxCpuTimeOfOneTx = 50 // max cpu time to execute single smart contract transaction. default 50ms. proposal 13
  witnessMaxActiveNum = 5 // max witness number
}

log.level = {
  root = &quot;INFO&quot; // TRACE;DEBUG;INFO;WARN;ERROR
}
</code></pre></div><ul><li>iii. Start the side-chain fullnode, configure <em>kafka</em>, connect the side-chain</li> <li>v. Owner deploys a <em>side-chain</em> gateway contract on <em>side-chain</em> (set the contract deployer to pay all the energy cost), gets the contract address C2.
<ul><li>using sun-cli's deploycontract command (cannot use wallet-cli)</li></ul></li> <li>iv. Add oracles by calling the addOracle(address) method of the side-chain gateway contract.
<ul><li>sun-cli command: <code>triggercontract $sidechain_gateway addOracle(address) &quot;$oracel_address&quot; false 1000000000 0 0 0</code></li></ul></li> <li>v. login as GR to creates the proposal to let the side-chain node know the address of side-chain's gateway, using <code>approveproposal</code> after <code>createproposal</code> <ul><li>sun-cli command: <code>createproposal 1000001 $sidechain_gateway</code></li> <li>sun-cli command: <code>approveproposal 1 true</code></li></ul></li></ul> <h4 id="_5-restart-sun-cli"><a href="#_5-restart-sun-cli" class="header-anchor">#</a> 5. Restart sun-cli</h4> <ul><li>Configure the side-chain gateway address C2 into the sun-cli configuration file and restart sun-cli.</li></ul> <h4 id="_6-config-oracle"><a href="#_6-config-oracle" class="header-anchor">#</a> 6. Config Oracle</h4> <ul><li>start oracle (If there are multiple oracles, start them one by one)</li></ul> <blockquote><p>configuration file:</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>mainchain {
  fullnode {
    ip.list = [
      &quot;&quot;
    ]
  }

  solidity {
    ip.list = [
      &quot;&quot;
    ]
  }
}

sidechain {
  fullnode {
    ip.list = [
      &quot;&quot;
    ]
  }

  solidity {
    ip.list = [
      &quot;&quot;
    ]
  }

  chain.id = 
}

kafka {
  server = &quot;&quot;
  # group.id = 
  authorization {
    user = 
    passwd = 
  }
}

gateway {
  mainchain.address = 
  sidechain.address = 
}

oracle {
  # private.key = 
  keystore=&quot;&quot;
  retryTimes = 3
}

initTaskSwitch = true

</code></pre></div><h4 id="_7-set-gateway-contract-properties-on-main-chain-and-side-chain"><a href="#_7-set-gateway-contract-properties-on-main-chain-and-side-chain" class="header-anchor">#</a> 7. set gateway contract properties on <em>main-chain</em> and <em>side-chain</em></h4> <ul><li>Owner need to set minimal deposit fee, charging fee on gateway contract.</li></ul> <h4 id="_8-owner-send-go-initial-fund-for-cross-chain-transaction-on-side-chain"><a href="#_8-owner-send-go-initial-fund-for-cross-chain-transaction-on-side-chain" class="header-anchor">#</a> 8. Owner send GO initial fund for cross-chain transaction on <em>side-chain</em></h4> <ul><li>recommand 100 TRX for each oracle.</li></ul> <h4 id="_9-create-proposal-to-kick-off-resource-charging"><a href="#_9-create-proposal-to-kick-off-resource-charging" class="header-anchor">#</a> 9. create proposal to kick off resource charging.</h4> <ul><li>login as a GR to create proposal: <code>createproposal 1000000 1</code>.</li> <li>Wait 2/3 of GRs to approved the proposal.</li></ul> <h3 id="test-whether-is-successful"><a href="#test-whether-is-successful" class="header-anchor">#</a> Test whether is successful</h3> <h4 id="_1-how-to-deposittrx"><a href="#_1-how-to-deposittrx" class="header-anchor">#</a> 1. How to <em>depositTRX</em></h4> <ul><li><p>i. An account (as A2) on the main-chain, calls the main-chain gateway contract's depositTRX or fallback function to pip TRX into side-chain</p> <ul><li>sun-cli command: <code>deposit trx $main_gateway $num $feelmit</code></li></ul></li> <li><p>ii. After a while, check the account balance on the side-chain (check whether the account is created, and check it's balance)</p> <ul><li>sun-cli command: <code>getAccount $address</code></li></ul></li> <li><p>iii. Repeat <em>i</em> and <em>ii</em> if needed.</p></li></ul> <h4 id="_2-how-to-deposittrc10"><a href="#_2-how-to-deposittrc10" class="header-anchor">#</a> 2. How to <em>depositTRC10</em></h4> <ul><li><p>i. An account (as A3) issues a TRC10 on the main-chain</p> <ul><li>sun-cli command to issue a TRC10 Token: <code>assetissue nmbb 10000000000 1 1 0 2019-10-13 2019-12-31 abc abc.com 1000 10000</code></li> <li>list all TRC10 tokens: <code>ListAssetIssue</code></li></ul></li> <li><p>ii. Call the main-chain gateway contract's depositTRC10 or fallback function to pip TRC10 into side-chain.</p> <ul><li>sun-cli command: <code>deposit trc10 $main_gateway $trc10Id $num $feelmit</code></li></ul></li> <li><p>iii. After a while, check the TRC10 balance on the side-chain (A3 account is created, corresponding TRC10 token should be also created)</p> <ul><li>sun-cli command: <code>getAccount $address</code></li></ul></li> <li><p>iv. Repeat <em>ii</em> and <em>iii</em> if needed.</p></li></ul> <h4 id="_3-how-to-deposittrc20"><a href="#_3-how-to-deposittrc20" class="header-anchor">#</a> 3. How to <em>depositTRC20</em></h4> <ul><li><p>i. Deploy a TRC20 contract on the main-chain</p></li> <li><p>ii. A4 calls the depositTRC20 of the main-chain gateway contract to see if the transaction is failed, and the failure is correct.</p> <ul><li>sun-cli command: <code>deposit trc20 mainchainTrc20ContractAddress mainGatewayAddress num feelmit</code></li></ul></li> <li><p>iii. The TRC20 developer calls the mappingTRC20 of the main-chain gateway on the main-chain to complete the mapping between the main-chain and the side-chain, then the corresponding TRC20 contract on the side-chain is created.</p> <ul><li>sun-cli command: <code>triggercontract $main_chain_gateway mappingTRC20(bytes) $deployed_transaction_id false 1000000000 0 0 #</code></li></ul></li> <li><p>iv. A4 calls the depositTRC20 of the main-chain gateway contract</p></li> <li><p>v. After a while, check the TRC20 mapping relationship in the mainchainSideContractMap(address) in the side-chain gateway (A4 account will not be created)</p></li> <li><p>vi. Call balanceOf(address) of the corresponding TRC20 contract to check whether the account balance is correctly increased.</p></li></ul> <h4 id="_4-how-to-deposittrc721"><a href="#_4-how-to-deposittrc721" class="header-anchor">#</a> 4. How to <em>depositTRC721</em></h4> <ul><li><p>i. Deploy a TRC721 contract on the main-chain</p></li> <li><p>ii. An account (as A5) calls the depositTRC721 of the main-chain gateway contract, to see if the transaction failed, the failure is the correct expectation</p> <ul><li>sun-cli command: <code>deposit trc721 $mainchain_trc721_contract $main_chain_gateway $trc721_tokenId $feelmit</code></li></ul></li> <li><p>iii. The TRC721 developer calls the mappingTRC721 of the main-chain gateway on the main-chain to complete the mapping between the main-chain and the side-chain, then the corresponding TRC721 contract on the side-chain is created.</p> <ul><li>sun-cli command: <code>triggercontract $main_chain_gateway mappingTRC721(bytes) $deployed_transaction_id false 1000000000 0 0 #</code></li></ul></li> <li><p>iv. A5 calls the depositTRC721 of the main-chain gateway contract</p></li> <li><p>v. After a while, check the TRC721 mapping relationship in the mainToSideContractMap(address) in the side-chain gateway (A5 account will not be created)</p></li> <li><p>vi. Call balanceOf(address) of the corresponding TRC721 contract to check the ownership of the corresponding tokenId.</p></li></ul> <h4 id="_5-how-to-withdrawtrx"><a href="#_5-how-to-withdrawtrx" class="header-anchor">#</a> 5. How to <em>withdrawTRX</em></h4> <ul><li>i. use account A2 and trigger withdrawTRX function in gateway contract on side-chain
<ul><li>sun-cli command: <code>withdraw trx $trx_num $fee_limit</code></li></ul></li> <li>ii. wait for sometimes and check trx balance on main-chain.</li></ul> <h4 id="_6-how-to-withdrawtrc10"><a href="#_6-how-to-withdrawtrc10" class="header-anchor">#</a> 6. How to <em>withdrawTRC10</em></h4> <ul><li>i. use account A3，than trigger withdrawTRC10 function in gateway contract on side-chain
<ul><li>sun-cli command: <code>withdraw trc10 $trc10Id $value $fee_limit</code></li></ul></li> <li>ii. wait for sometimes and check trc10 balance on main-chain.</li></ul> <h4 id="_7-withdraw-trc20-token-process"><a href="#_7-withdraw-trc20-token-process" class="header-anchor">#</a> 7. withdraw TRC20 token process</h4> <ul><li>i. use A4 account on side-chain and trigger the withdrawal function for target trc20 contract on side-chain.
<ul><li>sun-cli cmd: <code>withdraw Trc20 $side_trc20_address $value $fee_limit</code></li></ul></li> <li>ii. wait for sometimes and check trc20 token balance on main-chain.</li></ul> <h4 id="_8-withdraw-trc721-token-process"><a href="#_8-withdraw-trc721-token-process" class="header-anchor">#</a> 8. withdraw TRC721 token process</h4> <ul><li>i. use A5 account on side-chain and trigger the withdrawal function for target trc721 contract on side-chain.
<ul><li>sun-cli cmd: <code>withdraw Trc721 $sideTrc721Address $trc721_tokenId $fee_limit</code></li></ul></li> <li>ii. wait for sometimes and check specific trc721 tokenid ownership on main-chain.</li></ul> <h4 id="_9-retrywithdraw-token-process"><a href="#_9-retrywithdraw-token-process" class="header-anchor">#</a> 9. retryWithdraw token process</h4> <ul><li>use nonce on side-chain to trigger retry action
<ul><li>sun-cli cmd: <code>triggercontract $sidechaingateway retryWithdraw(uint256) $nonce false 1000000000 0 0 0</code></li></ul></li></ul> <h4 id="_10-the-preparation-before-creating-charging-fee-proposal"><a href="#_10-the-preparation-before-creating-charging-fee-proposal" class="header-anchor">#</a> 10. the preparation before creating charging fee proposal</h4> <ul><li><p>i. gateway contract deployer should deposit proper amount of trx to side-chain and freeze trx for bandwidth/energy.</p> <ul><li>sun-cli cmd: <code>deposit trx $mainGatewayAddress $num $feelmit</code></li> <li>freeze cmd is the same as main-net.</li></ul></li> <li><p>ii. Oracle need to deposit proper amount of trx to side-chain，and freeze trx for bandwidth/energy, for cross chain actions。</p> <ul><li>sun-cli cmd （same as gateway contract deployer）: <code>deposit trx $mainGatewayAddress $num $feelmit</code></li> <li>freeze cmd is the same as main-net.</li></ul></li> <li><p>iii. One wintess create proposal for energyChargingSwitchOn == 1</p> <ul><li>witnesses create proposal
<ul><li>sun-cli cmd: <code>createproposal 1000000 1 //eg. createproposal 1000000 1</code></li></ul></li> <li>approve and wait proposal to be available
<ul><li>sun-cli cmd: <code>approveproposal 1 true</code></li></ul></li></ul></li></ul> <h4 id="_11-test-if-everything-works-as-expected-under-charging-fee-proposal-is-approved"><a href="#_11-test-if-everything-works-as-expected-under-charging-fee-proposal-is-approved" class="header-anchor">#</a> 11. Test if everything works as expected under charging fee proposal is approved</h4> <ul><li>test cmd 1-9 again.</li></ul> <h2 id="ix-roadmap"><a href="#ix-roadmap" class="header-anchor">#</a> IX. RoadMap</h2> <p>As part of the TRON expansion plan, DAppChain is committed to decentralizing and prospering the TRON ecosystem. For all builders of the entire ecology, it will be accompanied by the development of DAppChain through the three stages of L1, L2 and L3. We will open up more roles for the community as the plan progresses and the development work is completed, allowing the community to participate in the entire ecosystem in different forms.</p> <p><img src="/sunnetwork/doc/assets/img/roadmap.2d42e9c8.png" alt="roadmap"></p> <ul><li>L1: the First DAppChain</li></ul> <p>In the L1 phase, TRON will announce its first isomorphic sidechain, DAppChain. Expand the TRON main network and support the ecological development of DApp on sidechain.</p> <p>In the L1 phase, the roles open to the community are:
User: chain normal user, DApp player
Developer: Contract and DApp Developer
Witness: chain transaction verifier, responsible for side-chain transaction packing.</p> <p>At this stage, DAppChain was originally built by the TRON Foundation. We encourages the community to participate to be witnesses, act as the validators of the sidechain, and ultimately achieve community autonomy.</p> <ul><li>L2: Autonomous Chains (multiple community DAppChains)</li></ul> <p>The SUN Network sidechain, with its initial DAppChain, will allow community developers to build their own sidechains and use their own tokens to manage its ecosystem. The side-chain can be customized to make it more suitable for the business characteristics of their DApps, such as lower resource consumption, faster block production speed and so on.
This phase will encourage communities to operate multiple sidechains.</p> <ul><li>L3: Fair Network</li></ul> <p>After the ecological expansion, the behavior between the chains will be verified by the community Judger node. It will be combined with zk-snark/Truebit-liked to verify, reward and punish Judger's behavior to ensure the governance of the entire network.</p> <p>The L3 phase will open the Judger role of the side-chain to the community.</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/sunnetwork/doc/assets/js/app.da28acec.js" defer></script><script src="/sunnetwork/doc/assets/js/2.5e8057ea.js" defer></script><script src="/sunnetwork/doc/assets/js/5.6ad6379a.js" defer></script><script src="/sunnetwork/doc/assets/js/3.8582971b.js" defer></script>
  </body>
</html>
