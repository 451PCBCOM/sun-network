<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>SunWeb | Sun Network</title>
    <meta name="description" content="">
    <link rel="icon" href="/sunnetwork/doc/favicon.png">
    
    <link rel="preload" href="/sunnetwork/doc/assets/css/0.styles.12438fab.css" as="style"><link rel="preload" href="/sunnetwork/doc/assets/js/app.366ea872.js" as="script"><link rel="preload" href="/sunnetwork/doc/assets/js/2.fab13e0a.js" as="script"><link rel="preload" href="/sunnetwork/doc/assets/js/13.bffbf540.js" as="script"><link rel="prefetch" href="/sunnetwork/doc/assets/js/10.1eb239ae.js"><link rel="prefetch" href="/sunnetwork/doc/assets/js/11.58048bc2.js"><link rel="prefetch" href="/sunnetwork/doc/assets/js/12.825454d4.js"><link rel="prefetch" href="/sunnetwork/doc/assets/js/14.442564b3.js"><link rel="prefetch" href="/sunnetwork/doc/assets/js/3.fd5cc1f2.js"><link rel="prefetch" href="/sunnetwork/doc/assets/js/4.c2ed9486.js"><link rel="prefetch" href="/sunnetwork/doc/assets/js/5.c84559b7.js"><link rel="prefetch" href="/sunnetwork/doc/assets/js/6.effe306d.js"><link rel="prefetch" href="/sunnetwork/doc/assets/js/7.51fec056.js"><link rel="prefetch" href="/sunnetwork/doc/assets/js/8.13ea4433.js"><link rel="prefetch" href="/sunnetwork/doc/assets/js/9.71166c7d.js">
    <link rel="stylesheet" href="/sunnetwork/doc/assets/css/0.styles.12438fab.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/sunnetwork/doc/zh/" class="home-link router-link-active"><!----> <span class="site-name">Sun Network</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/sunnetwork/doc/zh/guide/" class="nav-link router-link-active">指南</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/sunnetwork/doc/guide/SUNWEB.html" class="nav-link">English</a></li><li class="dropdown-item"><!----> <a href="/sunnetwork/doc/zh/guide/SUNWEB.html" class="nav-link router-link-exact-active router-link-active">简体中文</a></li></ul></div></div> <a href="https://github.com/tronprotocol/sun-network" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/sunnetwork/doc/zh/guide/" class="nav-link router-link-active">指南</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">选择语言</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/sunnetwork/doc/guide/SUNWEB.html" class="nav-link">English</a></li><li class="dropdown-item"><!----> <a href="/sunnetwork/doc/zh/guide/SUNWEB.html" class="nav-link router-link-exact-active router-link-active">简体中文</a></li></ul></div></div> <a href="https://github.com/tronprotocol/sun-network" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/sunnetwork/doc/zh/guide/" class="sidebar-link">Sun Network 使用文档</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/sunnetwork/doc/zh/guide/#sun-network-计划" class="sidebar-link">Sun Network 计划</a></li><li class="sidebar-sub-header"><a href="/sunnetwork/doc/zh/guide/#dappchain-的特点" class="sidebar-link">DAppChain 的特点</a></li><li class="sidebar-sub-header"><a href="/sunnetwork/doc/zh/guide/#连接-dappchain" class="sidebar-link">连接 DAppChain</a></li><li class="sidebar-sub-header"><a href="/sunnetwork/doc/zh/guide/#申请测试币" class="sidebar-link">申请测试币</a></li><li class="sidebar-sub-header"><a href="/sunnetwork/doc/zh/guide/#sun-client-简介" class="sidebar-link">Sun Client 简介</a></li><li class="sidebar-sub-header"><a href="/sunnetwork/doc/zh/guide/#质押资产" class="sidebar-link">质押资产</a></li><li class="sidebar-sub-header"><a href="/sunnetwork/doc/zh/guide/#资产映射" class="sidebar-link">资产映射</a></li><li class="sidebar-sub-header"><a href="/sunnetwork/doc/zh/guide/#提取资产" class="sidebar-link">提取资产</a></li><li class="sidebar-sub-header"><a href="/sunnetwork/doc/zh/guide/#部署-dapp" class="sidebar-link">部署 DApp</a></li><li class="sidebar-sub-header"><a href="/sunnetwork/doc/zh/guide/#资源链接" class="sidebar-link">资源链接</a></li></ul></li><li><a href="/sunnetwork/doc/zh/guide/JAVASDK.html" class="sidebar-link">JAVA SDK</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/sunnetwork/doc/zh/guide/JAVASDK.html#链间交互接口介绍" class="sidebar-link">链间交互接口介绍</a></li><li class="sidebar-sub-header"><a href="/sunnetwork/doc/zh/guide/JAVASDK.html#侧链接口介绍" class="sidebar-link">侧链接口介绍</a></li><li class="sidebar-sub-header"><a href="/sunnetwork/doc/zh/guide/JAVASDK.html#主链接口介绍" class="sidebar-link">主链接口介绍</a></li><li class="sidebar-sub-header"><a href="/sunnetwork/doc/zh/guide/JAVASDK.html#公共接口介绍" class="sidebar-link">公共接口介绍</a></li></ul></li><li><a href="/sunnetwork/doc/zh/guide/SUNWEB.html" class="active sidebar-link">SunWeb</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/sunnetwork/doc/zh/guide/SUNWEB.html#sunweb-类" class="sidebar-link">SunWeb 类</a></li><li class="sidebar-sub-header"><a href="/sunnetwork/doc/zh/guide/SUNWEB.html#sunweb新增函数" class="sidebar-link">SunWeb新增函数</a></li><li class="sidebar-sub-header"><a href="/sunnetwork/doc/zh/guide/SUNWEB.html#质押资产" class="sidebar-link">质押资产</a></li><li class="sidebar-sub-header"><a href="/sunnetwork/doc/zh/guide/SUNWEB.html#资产授权" class="sidebar-link">资产授权</a></li><li class="sidebar-sub-header"><a href="/sunnetwork/doc/zh/guide/SUNWEB.html#资产映射" class="sidebar-link">资产映射</a></li><li class="sidebar-sub-header"><a href="/sunnetwork/doc/zh/guide/SUNWEB.html#提取资产" class="sidebar-link">提取资产</a></li><li class="sidebar-sub-header"><a href="/sunnetwork/doc/zh/guide/SUNWEB.html#注资" class="sidebar-link">注资</a></li><li class="sidebar-sub-header"><a href="/sunnetwork/doc/zh/guide/SUNWEB.html#重试" class="sidebar-link">重试</a></li><li class="sidebar-sub-header"><a href="/sunnetwork/doc/zh/guide/SUNWEB.html#签名" class="sidebar-link">签名</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="sunweb"><a href="#sunweb" aria-hidden="true" class="header-anchor">#</a> SunWeb</h1> <p>SunWeb 是为Tron Sun-Network 开发的一款 js-sdk 工具，并且继承自 <a href="https://developers.tron.network/docs/tron-web-intro" target="_blank" rel="noopener noreferrer">TronWeb<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。 SunWeb 里面封装了mainchain 和 sidechain 两个对象，他们本质上就是 TronWeb 的对象实例，因此里面包含了 TronWeb 实例的所有属性和方法。例如用户可以使用 sunweb.mainchain.trx.getBalance() 来获取主网上的 balance。除此之外，SunWeb 增加了一些新的方法来支持主链和侧链的交互，如 deposit, withdraw, mapping, approve, injectFund 等操作，可参考<a href="https://github.com/tronprotocol/sun-network/tree/develop/js-sdk" target="_blank" rel="noopener noreferrer">源码<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。SunWeb 详细使用方法如下。</p> <h2 id="sunweb-类"><a href="#sunweb-类" aria-hidden="true" class="header-anchor">#</a> SunWeb 类</h2> <h6 id="创建-subweb-实例"><a href="#创建-subweb-实例" aria-hidden="true" class="header-anchor">#</a> 创建 SubWeb 实例</h6> <p>为了在应用中可以使用 SunWeb，你需要创建一个 sunWeb 实例。你可以定义两个js对象，如 mainOptions 和sideOptions，他们分别包含以下属性：</p> <ul><li><p>fullNode</p></li> <li><p>solidityNode</p></li> <li><p>eventServer</p></li></ul> <p>为了兼容 TronWeb，我们也可以只设置一个 fullHost 属性，</p> <ul><li>fullHost</li></ul> <p>但是相比于第二种，第一种具有更高的优先级。</p> <p>除此之外，你还需要提供主网和侧链的 Gateway 地址和侧链 ID：</p> <ul><li><p>mainGatewayAddress</p></li> <li><p>sideGatewayAddress</p></li> <li><p>sideChainId</p></li> <li><p>privateKey (optional)</p></li></ul> <p>例如只提供 fullHost 属性创建 SunWeb 实例</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> sunWeb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SunWeb</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  fullHost<span class="token punctuation">:</span> <span class="token string">'https://mainapi.trongrid.io'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  fullHost<span class="token punctuation">:</span> <span class="token string">'https://sideapi.trongrid.io'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  mainGatewayAddress<span class="token punctuation">,</span>
  sideGatewayAddress<span class="token punctuation">,</span>
  sideChainId<span class="token punctuation">,</span>
  privateKey<span class="token punctuation">:</span> <span class="token string">'...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>下面是提供不同服务器来创建 SunWeb 实例</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> sunWeb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SunWeb</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  fullNode<span class="token punctuation">:</span> <span class="token string">'http://fullnode.tron.network'</span><span class="token punctuation">,</span>
  solidityNode<span class="token punctuation">:</span> <span class="token string">'http://solidity.tron.network'</span><span class="token punctuation">,</span>
  eventServer<span class="token punctuation">:</span> <span class="token string">'http://mainapi.trongrid.io'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  fullNode<span class="token punctuation">:</span> <span class="token string">'http://fullnode.sun.network'</span><span class="token punctuation">,</span>
  solidityNode<span class="token punctuation">:</span> <span class="token string">'http://solidity.sun.network'</span><span class="token punctuation">,</span>
  eventServer<span class="token punctuation">:</span> <span class="token string">'http://sideapi.trongrid.io'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  mainGatewayAddress<span class="token punctuation">,</span>
  sideGatewayAddress<span class="token punctuation">,</span>
  sideChainId<span class="token punctuation">,</span>
  privateKey<span class="token punctuation">:</span> <span class="token string">'...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>如果需要连接 Sun-Network 测试网，可以创建如下的 SunWeb 实例</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> sunWeb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SunWeb</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  fullNode<span class="token punctuation">:</span> <span class="token string">'http://47.252.84.158:8090'</span><span class="token punctuation">,</span>
  solidityNode<span class="token punctuation">:</span> <span class="token string">'http://47.252.84.158:8090'</span><span class="token punctuation">,</span>
  eventServer<span class="token punctuation">:</span> <span class="token string">'http://47.252.84.141:8080'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  fullNode<span class="token punctuation">:</span> <span class="token string">'http://47.252.85.90:8090'</span><span class="token punctuation">,</span>
  solidityNode<span class="token punctuation">:</span> <span class="token string">'http://47.252.85.90:8091'</span><span class="token punctuation">,</span>
  eventServer<span class="token punctuation">:</span> <span class="token string">'http://47.252.85.90:8090'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">'TGHxhFu4jV4XqMGmk3tEQdSeihWVHE9kBP'</span><span class="token punctuation">,</span>
  <span class="token string">'TBHr5KpbA7oACUysTKxHiAD7c6X6nkZii1'</span><span class="token punctuation">,</span>
  <span class="token string">'41455CB714D762DC46D490EAB37BBA67B0BA910A59'</span><span class="token punctuation">,</span>
  privateKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="sunweb新增函数"><a href="#sunweb新增函数" aria-hidden="true" class="header-anchor">#</a> SunWeb新增函数</h2> <h2 id="质押资产"><a href="#质押资产" aria-hidden="true" class="header-anchor">#</a> 质押资产</h2> <p>资产质押的作用是将主链资产质押到侧链。</p> <h4 id="deposittrx"><a href="#deposittrx" aria-hidden="true" class="header-anchor">#</a> depositTrx</h4> <h6 id="质押trx"><a href="#质押trx" aria-hidden="true" class="header-anchor">#</a> 质押TRX</h6> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// Format</span>
sunWeb<span class="token punctuation">.</span><span class="token function">depostiTrx</span><span class="token punctuation">(</span>callValue<span class="token punctuation">,</span> feeLimit<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// example</span>
sunWeb<span class="token punctuation">.</span><span class="token function">depositTrx</span><span class="token punctuation">(</span><span class="token number">100000000</span><span class="token punctuation">,</span> <span class="token number">1000000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h6 id="arguments"><a href="#arguments" aria-hidden="true" class="header-anchor">#</a> Arguments</h6> <table><thead><tr><th>Parameter</th> <th>Description</th> <th>Type</th> <th>Options</th></tr></thead> <tbody><tr><td>callValue</td> <td>Amount of TRX (Units in SUN) to deposit</td> <td>Integer (Units in SUN)</td> <td>Required</td></tr> <tr><td>feeLimit</td> <td>Cost limit</td> <td>Integer, long</td> <td>Required</td></tr> <tr><td>options</td> <td>The permissions Id</td> <td>Object</td> <td>Optional</td></tr></tbody></table> <h4 id="deposittrc10"><a href="#deposittrc10" aria-hidden="true" class="header-anchor">#</a> depositTrc10</h4> <h6 id="质押-trc10"><a href="#质押-trc10" aria-hidden="true" class="header-anchor">#</a> 质押 TRC10</h6> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// format</span>
sunWeb<span class="token punctuation">.</span><span class="token function">depositTrc10</span><span class="token punctuation">(</span>tokenId<span class="token punctuation">,</span> tokenValue<span class="token punctuation">,</span> feeLimit<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// example</span>
sunWeb<span class="token punctuation">.</span><span class="token function">depositTrc10</span><span class="token punctuation">(</span><span class="token number">100059</span><span class="token punctuation">,</span> <span class="token number">10000000</span><span class="token punctuation">,</span> <span class="token number">100000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h6 id="arguments-2"><a href="#arguments-2" aria-hidden="true" class="header-anchor">#</a> Arguments</h6> <table><thead><tr><th>Parameter</th> <th>Description</th> <th>Type</th> <th>Options</th></tr></thead> <tbody><tr><td>tokenId</td> <td>Token Id of trc10</td> <td>Integer</td> <td>Required</td></tr> <tr><td>tokenValue</td> <td>Amount of trc10 token (Units in SUN) to deposit</td> <td>Integer (Units in SUN)</td> <td>Required</td></tr> <tr><td>feeLimit</td> <td>Cost limit</td> <td>Integer, long</td> <td>Required</td></tr> <tr><td>options</td> <td>The permissions Id</td> <td>Object</td> <td>Optional</td></tr></tbody></table> <h4 id="deposittrc20"><a href="#deposittrc20" aria-hidden="true" class="header-anchor">#</a> depositTrc20</h4> <h6 id="质押-trc20"><a href="#质押-trc20" aria-hidden="true" class="header-anchor">#</a> 质押 TRC20</h6> <p>在质押 TRC20 之前，必须先 mapping TRC20 合约到侧链，即调用 sunWeb.mappingTrc20(…) 函数。Mapping 合约后，再 approve TRC20, 即调用 sunWeb.approveTrc20(…) 函数。这两步都成功后，才能成功完成depositTrc20 操作。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// format</span>
sunWeb<span class="token punctuation">.</span><span class="token function">depositTrc10</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span> feeLimit<span class="token punctuation">,</span> contractAddress<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// example</span>
sunWeb<span class="token punctuation">.</span><span class="token function">depositTrc10</span><span class="token punctuation">(</span><span class="token number">1000000</span><span class="token punctuation">,</span> <span class="token number">1000000</span><span class="token punctuation">,</span> <span class="token string">'TD9Jrm546pGkzRu7K5nitMxk8nn75wXNkQ'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h6 id="arguments-3"><a href="#arguments-3" aria-hidden="true" class="header-anchor">#</a> Arguments</h6> <table><thead><tr><th>Parameter</th> <th>Description</th> <th>Type</th> <th>Options</th></tr></thead> <tbody><tr><td>num</td> <td>Amount of TRC20 (Units in SUN) to deposit</td> <td>Integer</td> <td>Required</td></tr> <tr><td>feeLimit</td> <td>Cost limit</td> <td>Integer, long</td> <td>Required</td></tr> <tr><td>contractAddress</td> <td>Main Chain TRC20 Contract Address</td> <td>String</td> <td>Required</td></tr> <tr><td>options</td> <td>The permissions Id</td> <td>Object</td> <td>Optional</td></tr></tbody></table> <h4 id="deposittrc721"><a href="#deposittrc721" aria-hidden="true" class="header-anchor">#</a> depositTrc721</h4> <h6 id="质押-trc721"><a href="#质押-trc721" aria-hidden="true" class="header-anchor">#</a> 质押 TRC721</h6> <p>与质押 TRC20 类似，先需要 mappingTrc721 和 approveTrc721。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// format</span>
sunWeb<span class="token punctuation">.</span><span class="token function">depositTrc721</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> feeLimit<span class="token punctuation">,</span> contractAddress<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// example</span>
sunWeb<span class="token punctuation">.</span><span class="token function">depositTrc10</span><span class="token punctuation">(</span><span class="token number">1000000</span><span class="token punctuation">,</span> <span class="token number">1000000</span><span class="token punctuation">,</span> <span class="token string">'TCLRqK6aP2xsCZWhE2smkYzdRHf9uvyz5P'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h6 id="arguments-4"><a href="#arguments-4" aria-hidden="true" class="header-anchor">#</a> Arguments</h6> <table><thead><tr><th>Parameter</th> <th>Description</th> <th>Type</th> <th>Options</th></tr></thead> <tbody><tr><td>id</td> <td>Id of TRC721 to deposit</td> <td>Integer</td> <td>Required</td></tr> <tr><td>feeLimit</td> <td>cost limit</td> <td>Integer, long</td> <td>Required</td></tr> <tr><td>contractAddress</td> <td>Main Chain TRC721 Contract Address</td> <td>String</td> <td>Required</td></tr> <tr><td>options</td> <td>The permissions Id</td> <td>Object</td> <td>Optional</td></tr></tbody></table> <h2 id="资产授权"><a href="#资产授权" aria-hidden="true" class="header-anchor">#</a> 资产授权</h2> <p>在质押 TRC20 和 TRC721 之前，需要先调用 approveTrc20 和 approveTrc721 获得相应资产授权。</p> <h3 id="approvetrc20"><a href="#approvetrc20" aria-hidden="true" class="header-anchor">#</a> approveTrc20</h3> <h6 id="授权-trc20"><a href="#授权-trc20" aria-hidden="true" class="header-anchor">#</a> 授权 TRC20</h6> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// format</span>
sunWeb<span class="token punctuation">.</span><span class="token function">approveTrc20</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span> feeLimit<span class="token punctuation">,</span> contractAddress<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// example</span>
sunWeb<span class="token punctuation">.</span><span class="token function">approveTrc20</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">,</span> <span class="token number">10000000</span><span class="token punctuation">,</span> <span class="token string">'TGKuXDnvdHv9RNE6BPXUtNLK2FrVMBDAuA'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h6 id="arguments-5"><a href="#arguments-5" aria-hidden="true" class="header-anchor">#</a> Arguments</h6> <table><thead><tr><th>Parameter</th> <th>Description</th> <th>Type</th> <th>Options</th></tr></thead> <tbody><tr><td>num</td> <td>Num of TRC20</td> <td>Integer</td> <td>Required</td></tr> <tr><td>contractAddress</td> <td>Main Chain TRC20 Contract Address</td> <td>String</td> <td>Required</td></tr> <tr><td>feeLimit</td> <td>Cost limit</td> <td>Integer, long</td> <td>Required</td></tr> <tr><td>options</td> <td>The permissions Id</td> <td>Object</td> <td>Optional</td></tr></tbody></table> <h3 id="approvetrc721"><a href="#approvetrc721" aria-hidden="true" class="header-anchor">#</a> approveTrc721</h3> <h6 id="授权-trc721"><a href="#授权-trc721" aria-hidden="true" class="header-anchor">#</a> 授权 TRC721</h6> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// format</span>
sunWeb<span class="token punctuation">.</span><span class="token function">approveTrc721</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> feeLimit<span class="token punctuation">,</span> contractAddress<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// example</span>
sunWeb<span class="token punctuation">.</span><span class="token function">approveTrc721</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">10000000</span><span class="token punctuation">,</span> <span class="token string">'TUxDmFbEceGgjWCb6rLVcrFgnsWwofPdPq'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h6 id="arguments-6"><a href="#arguments-6" aria-hidden="true" class="header-anchor">#</a> Arguments</h6> <table><thead><tr><th>Parameter</th> <th>Description</th> <th>Type</th> <th>Options</th></tr></thead> <tbody><tr><td>id</td> <td>Id of TRC721</td> <td>Integer</td> <td>Required</td></tr> <tr><td>contractAddress</td> <td>Main Chain TRC721 Contract Address</td> <td>String</td> <td>Required</td></tr> <tr><td>feeLimit</td> <td>Cost limit</td> <td>Integer, long</td> <td>Required</td></tr> <tr><td>options</td> <td>The permissions Id</td> <td>Object</td> <td>Optional</td></tr></tbody></table> <h2 id="资产映射"><a href="#资产映射" aria-hidden="true" class="header-anchor">#</a> 资产映射</h2> <p>用户必须先将主链合约资产 TRC20/TRC721 映射到侧链以后，才能将合约资产质押到侧链。</p> <h3 id="mappingtrc20"><a href="#mappingtrc20" aria-hidden="true" class="header-anchor">#</a> mappingTrc20</h3> <h6 id="映射trc20"><a href="#映射trc20" aria-hidden="true" class="header-anchor">#</a> 映射TRC20</h6> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// format</span>
<span class="token function">mappingTrc20</span><span class="token punctuation">(</span>trxHash<span class="token punctuation">,</span> feeLimit<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// example</span>
<span class="token function">mappingTrc20</span><span class="token punctuation">(</span><span class="token string">'548442d9080605a60adf1d30cc126a2b9c6308cbe9ec224f8c67a6c2590fa299'</span><span class="token punctuation">,</span> <span class="token number">100000</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h6 id="arguments-7"><a href="#arguments-7" aria-hidden="true" class="header-anchor">#</a> Arguments</h6> <table><thead><tr><th>Parameter</th> <th>Description</th> <th>Type</th> <th>Options</th></tr></thead> <tbody><tr><td>trxHash</td> <td>The hash value of the transaction for the main chain deployment TRC20 contract</td> <td>Hex string</td> <td>Required</td></tr> <tr><td>feeLimit</td> <td>cost limit</td> <td>Integer, long</td> <td>Required</td></tr> <tr><td>options</td> <td>The permissions Id</td> <td>Object</td> <td>Optional</td></tr></tbody></table> <h3 id="mappingtrc721"><a href="#mappingtrc721" aria-hidden="true" class="header-anchor">#</a> mappingTrc721</h3> <h6 id="映射-trc721"><a href="#映射-trc721" aria-hidden="true" class="header-anchor">#</a> 映射 TRC721</h6> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// format</span>
<span class="token function">mappingTrc721</span><span class="token punctuation">(</span>trxHash<span class="token punctuation">,</span> feeLimit<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// example</span>
<span class="token function">mappingTrc721</span><span class="token punctuation">(</span><span class="token string">'548442d9080605a60adf1d30cc126a2b9c6308cbe9ec224f8c67a6c2590fa299'</span><span class="token punctuation">,</span> <span class="token number">100000</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h6 id="arguments-8"><a href="#arguments-8" aria-hidden="true" class="header-anchor">#</a> Arguments</h6> <table><thead><tr><th>Parameter</th> <th>Description</th> <th>Type</th> <th>Options</th></tr></thead> <tbody><tr><td>trxHash</td> <td>The hash value of the transaction for the main chain deployment TRC721 contract</td> <td>Hex string</td> <td>Required</td></tr> <tr><td>feeLimit</td> <td>cost limit</td> <td>Integer, long</td> <td>Required</td></tr> <tr><td>options</td> <td>The permissions Id</td> <td>Object</td> <td>Optional</td></tr></tbody></table> <h2 id="提取资产"><a href="#提取资产" aria-hidden="true" class="header-anchor">#</a> 提取资产</h2> <p>用户可将资产从侧链提取回主链，提取资产操作由 SunWeb 向侧链发送命令。</p> <h4 id="withdrawtrx"><a href="#withdrawtrx" aria-hidden="true" class="header-anchor">#</a> withdrawTrx</h4> <h6 id="提取trx"><a href="#提取trx" aria-hidden="true" class="header-anchor">#</a> 提取TRX</h6> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// Format</span>
sunWeb<span class="token punctuation">.</span><span class="token function">withdrawTrx</span><span class="token punctuation">(</span>callValue<span class="token punctuation">,</span> feeLimit<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// example</span>
sunWeb<span class="token punctuation">.</span><span class="token function">withdrawTrx</span><span class="token punctuation">(</span><span class="token number">100000000</span><span class="token punctuation">,</span> <span class="token number">1000000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h6 id="arguments-9"><a href="#arguments-9" aria-hidden="true" class="header-anchor">#</a> Arguments</h6> <table><thead><tr><th>Parameter</th> <th>Description</th> <th>Type</th> <th>Options</th></tr></thead> <tbody><tr><td>callValue</td> <td>Amount of TRX (Units in SUN) to deposit</td> <td>Integer (Units in SUN)</td> <td>Required</td></tr> <tr><td>feeLimit</td> <td>Cost limit</td> <td>Integer, long</td> <td>Required</td></tr> <tr><td>options</td> <td>The permissions Id</td> <td>Object</td> <td>Optional</td></tr></tbody></table> <h3 id="withdrawtrc10"><a href="#withdrawtrc10" aria-hidden="true" class="header-anchor">#</a> withdrawTrc10</h3> <h6 id="提取-trc10"><a href="#提取-trc10" aria-hidden="true" class="header-anchor">#</a> 提取 TRC10</h6> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// format</span>
sunWeb<span class="token punctuation">.</span><span class="token function">withdrawTrc10</span><span class="token punctuation">(</span>tokenId<span class="token punctuation">,</span> tokenValue<span class="token punctuation">,</span> feeLimit<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// example</span>
sunWeb<span class="token punctuation">.</span><span class="token function">withdrawTrc10</span><span class="token punctuation">(</span><span class="token number">100059</span><span class="token punctuation">,</span> <span class="token number">10000000</span><span class="token punctuation">,</span> <span class="token number">100000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h6 id="arguments-10"><a href="#arguments-10" aria-hidden="true" class="header-anchor">#</a> Arguments</h6> <table><thead><tr><th>Parameter</th> <th>Description</th> <th>Type</th> <th>Options</th></tr></thead> <tbody><tr><td>tokenId</td> <td>Token Id of TRC10</td> <td>Integer</td> <td>Required</td></tr> <tr><td>tokenValue</td> <td>Amount of TRC10 token (Units in SUN) to deposit</td> <td>Integer (Units in SUN)</td> <td>Required</td></tr> <tr><td>feeLimit</td> <td>Cost limit</td> <td>Integer, long</td> <td>Required</td></tr> <tr><td>options</td> <td>The permissions Id</td> <td>Object</td> <td>Optional</td></tr></tbody></table> <h4 id="withdrawtrc20"><a href="#withdrawtrc20" aria-hidden="true" class="header-anchor">#</a> withdrawTrc20</h4> <h6 id="提取-trc20"><a href="#提取-trc20" aria-hidden="true" class="header-anchor">#</a> 提取 TRC20</h6> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// format</span>
sunWeb<span class="token punctuation">.</span><span class="token function">withdrawTrc20</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span> feeLimit<span class="token punctuation">,</span> contractAddress<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// example</span>
sunWeb<span class="token punctuation">.</span><span class="token function">withdrawTrc20</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">,</span> <span class="token number">10000000</span><span class="token punctuation">,</span> <span class="token string">'TWzXQmDoASGodMss7uPD6vUgLHnkQFX7ok'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h6 id="arguments-11"><a href="#arguments-11" aria-hidden="true" class="header-anchor">#</a> Arguments</h6> <table><thead><tr><th>Parameter</th> <th>Description</th> <th>Type</th> <th>Options</th></tr></thead> <tbody><tr><td>Num</td> <td>Num of TRC20</td> <td>Integer</td> <td>Required</td></tr> <tr><td>contractAddress</td> <td>Side Chain TRC20 Contract Address after mapping</td> <td>Integer</td> <td>Required</td></tr> <tr><td>feeLimit</td> <td>Cost limit</td> <td>Integer, long</td> <td>Required</td></tr> <tr><td>options</td> <td>The permissions Id</td> <td>Object</td> <td>Optional</td></tr></tbody></table> <h4 id="withdrawtrc721"><a href="#withdrawtrc721" aria-hidden="true" class="header-anchor">#</a> withdrawTrc721</h4> <h6 id="提取-trc721"><a href="#提取-trc721" aria-hidden="true" class="header-anchor">#</a> 提取 TRC721</h6> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// format</span>
sunWeb<span class="token punctuation">.</span><span class="token function">withdrawTrc721</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> feeLimit<span class="token punctuation">,</span> contractAddress<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// example</span>
sunWeb<span class="token punctuation">.</span><span class="token function">withdrawTrc721</span><span class="token punctuation">(</span><span class="token number">101</span><span class="token punctuation">,</span> <span class="token number">10000000</span><span class="token punctuation">,</span> <span class="token string">'TA2xrVESq2UcEtDtgPzxNJEiLgxmMVdtFR'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h6 id="arguments-12"><a href="#arguments-12" aria-hidden="true" class="header-anchor">#</a> Arguments</h6> <table><thead><tr><th>Parameter</th> <th>Description</th> <th>Type</th> <th>Options</th></tr></thead> <tbody><tr><td>id</td> <td>Id of TRC721</td> <td>Integer</td> <td>Required</td></tr> <tr><td>contractAddress</td> <td>Side Chain TRC20 Contract Address after mapping</td> <td>Integer</td> <td>Required</td></tr> <tr><td>feeLimit</td> <td>Cost limit</td> <td>Integer, long</td> <td>Required</td></tr> <tr><td>options</td> <td>The permissions Id</td> <td>Object</td> <td>Optional</td></tr></tbody></table> <h2 id="注资"><a href="#注资" aria-hidden="true" class="header-anchor">#</a> 注资</h2> <p>注资的主要作用是为侧链的基金池注入资金。</p> <h6 id="injectfund"><a href="#injectfund" aria-hidden="true" class="header-anchor">#</a> injectFund</h6> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// format</span>
sunWeb<span class="token punctuation">.</span><span class="token function">injectFund</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span> feeLimit<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// example</span>
sunWeb<span class="token punctuation">.</span><span class="token function">injectFund</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">10000000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h6 id="arguments-13"><a href="#arguments-13" aria-hidden="true" class="header-anchor">#</a> Arguments</h6> <table><thead><tr><th>Parameter</th> <th>Description</th> <th>Type</th> <th>Options</th></tr></thead> <tbody><tr><td>num</td> <td>num of injecting</td> <td>Integer</td> <td>Required</td></tr> <tr><td>feeLimit</td> <td>Cost limit</td> <td>Integer, long</td> <td>Required</td></tr> <tr><td>options</td> <td>The permissions Id</td> <td>Object</td> <td>Optional</td></tr></tbody></table> <h2 id="重试"><a href="#重试" aria-hidden="true" class="header-anchor">#</a> 重试</h2> <h4 id="retrydeposit"><a href="#retrydeposit" aria-hidden="true" class="header-anchor">#</a> retryDeposit</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// format</span>
sunWeb<span class="token punctuation">.</span><span class="token function">retryDeposit</span><span class="token punctuation">(</span>nonce<span class="token punctuation">,</span> feeLimit<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// example</span>
sunWeb<span class="token punctuation">.</span><span class="token function">retryDeposit</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">10000000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h6 id="arguments-14"><a href="#arguments-14" aria-hidden="true" class="header-anchor">#</a> Arguments</h6> <table><thead><tr><th>Parameter</th> <th>Description</th> <th>Type</th> <th>Options</th></tr></thead> <tbody><tr><td>nonce</td> <td>Nonce value of asset deposit</td> <td>Integer</td> <td>Required</td></tr> <tr><td>feeLimit</td> <td>Cost limit</td> <td>Integer, long</td> <td>Required</td></tr> <tr><td>options</td> <td>The permissions Id</td> <td>Object</td> <td>Optional</td></tr></tbody></table> <h4 id="retrymapping"><a href="#retrymapping" aria-hidden="true" class="header-anchor">#</a> retryMapping</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// format</span>
sunWeb<span class="token punctuation">.</span><span class="token function">retryMapping</span><span class="token punctuation">(</span>nonce<span class="token punctuation">,</span> feeLimit<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// example</span>
sunWeb<span class="token punctuation">.</span><span class="token function">retryMapping</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">10000000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h6 id="arguments-15"><a href="#arguments-15" aria-hidden="true" class="header-anchor">#</a> Arguments</h6> <table><thead><tr><th>Parameter</th> <th>Description</th> <th>Type</th> <th>Options</th></tr></thead> <tbody><tr><td>nonce</td> <td>Nonce value of asset deposit</td> <td>Integer</td> <td>Required</td></tr> <tr><td>feeLimit</td> <td>Cost limit</td> <td>Integer, long</td> <td>Required</td></tr> <tr><td>options</td> <td>The permissions Id</td> <td>Object</td> <td>Optional</td></tr></tbody></table> <h4 id="retrywithdraw"><a href="#retrywithdraw" aria-hidden="true" class="header-anchor">#</a> retryWithdraw</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// format</span>
sunWeb<span class="token punctuation">.</span><span class="token function">retryWithdraw</span><span class="token punctuation">(</span>nonce<span class="token punctuation">,</span> feeLimit<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// example</span>
sunWeb<span class="token punctuation">.</span><span class="token function">retryWithdraw</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">10000000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h6 id="arguments-16"><a href="#arguments-16" aria-hidden="true" class="header-anchor">#</a> Arguments</h6> <table><thead><tr><th>Parameter</th> <th>Description</th> <th>Type</th> <th>Options</th></tr></thead> <tbody><tr><td>nonce</td> <td>Nonce value of asset deposit</td> <td>Integer</td> <td>Required</td></tr> <tr><td>feeLimit</td> <td>Cost limit</td> <td>Integer, long</td> <td>Required</td></tr> <tr><td>options</td> <td>The permissions Id</td> <td>Object</td> <td>Optional</td></tr></tbody></table> <h2 id="签名"><a href="#签名" aria-hidden="true" class="header-anchor">#</a> 签名</h2> <p>Sun-network 的签名有一些改变，主链的签名逻辑和TronWeb的保持一致，侧链的签名逻辑有更改。因此，如果需要和TronLink一样弹出签名框，需要分别覆盖sunWeb.mainchain.trx.sign()和sunWeb.sidechain.trx.sign().</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// format</span>
<span class="token function">sign</span><span class="token punctuation">(</span>transaction <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> privateKey <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sidechain<span class="token punctuation">.</span>defaultPrivateKey<span class="token punctuation">,</span> useTronHeader <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> multisig <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/sunnetwork/doc/zh/guide/JAVASDK.html" class="prev">
          JAVA SDK
        </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/sunnetwork/doc/assets/js/app.366ea872.js" defer></script><script src="/sunnetwork/doc/assets/js/2.fab13e0a.js" defer></script><script src="/sunnetwork/doc/assets/js/13.bffbf540.js" defer></script>
  </body>
</html>
